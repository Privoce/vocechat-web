"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[889],{7933:(e,t,a)=>{a.d(t,{A:()=>i});var l,r=a(91118);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},s.apply(null,arguments)}const n=({title:e,titleId:t,...a},n)=>r.createElement("svg",s({width:20,height:20,viewBox:"0 0 20 20",fill:"#667085",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,l||(l=r.createElement("path",{d:"M6 4C6 2.89543 6.89543 2 8 2H14C15.1046 2 16 2.89543 16 4V14C16 15.1046 15.1046 16 14 16H8C6.89543 16 6 15.1046 6 14V4ZM4 6.00001C4 5.25973 4.4022 4.61339 5 4.26758V14.5C5 15.8807 6.11929 17 7.5 17H13.7324C13.3866 17.5978 12.7403 18 12 18H7.5C5.567 18 4 16.433 4 14.5V6.00001Z"}))),i=(0,r.forwardRef)(n)},8249:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(28512),r=a(45646);const s=({uid:e,name:t="",showName:a=!0})=>{const s=(0,l.GV)((t=>t.footprint.remarkMap[e]));return s?(0,r.jsxs)(r.Fragment,{children:[s," ",a?`(${t})`:null]}):t}},8548:(e,t,a)=>{a.d(t,{A:()=>o});var l=a(91118),r=a(96641),s=a(28512),n=a(31210),i=a(86560);function o(){const[e,t]=(0,l.useState)(""),a=(0,s.GV)((e=>{var t;return null===(t=e.authData.user)||void 0===t?void 0:t.is_admin}),n.bN),o=(0,s.GV)((e=>Object.values(e.users.byId)),n.bN),c=(0,s.GV)((e=>e.server.contact_verification_enable),n.bN),[d,u]=(0,l.useState)([]),m=c&&!a?o.filter((e=>"added"==e.status)):o;(0,l.useEffect)((()=>{if(e){let t=["",(0,r.escapeRegExp)(e.toLowerCase()),""].join(".*"),a=new RegExp(t);u((0,i.g4)(m.filter((e=>!!e&&a.test(e.name.toLowerCase())))))}else u((0,i.g4)(m))}),[e,m.length]);return{input:e,users:d,uids:d.map((e=>e.uid)),updateInput:e=>{t(e)}}}},14313:(e,t,a)=>{a.d(t,{A:()=>b});var l=a(91118),r=a(66514),s=a(28512),n=a(34052),i=a(86560),o=a(45646);const c=({url:e})=>{const[t,a]=(0,l.useState)(!1);return e?(0,o.jsx)("div",{className:"flex-center h-full",children:t?(0,o.jsx)("div",{className:"p-[18px] text-gray-500",children:"Unable to play this audio"}):(0,o.jsx)("audio",{className:"w-full",controls:!0,src:e,onError:e=>{console.error("audio err",e),a(!0)}})}):null},d=({url:e})=>{const[t,a]=(0,l.useState)("");return(0,l.useEffect)((()=>{(async e=>{if(!e)return;const t=await fetch(e),l=await t.text();a(l)})(e)}),[e]),t?(0,o.jsx)("div",{className:"h-[218px] p-[15px] pb-0 bg-black text-white overflow-scroll whitespace-pre-wrap break-all leading-snug",children:t}):null},u=({url:e})=>{const[t,a]=(0,l.useState)("");return(0,l.useEffect)((()=>{(async e=>{if(!e)return;const t=await fetch(e),l=await t.text();a(l)})(e)}),[e]),t?(0,o.jsx)("div",{className:"bg-white h-[218px] p-[15px] pb-0 whitespace-pre-wrap break-all",children:t}):null};var m=a(76147),h=a(81205);const x=({url:e,alt:t})=>{const[a,{error:s,isSuccess:n}]=(0,h.eA)(),[i,c]=(0,l.useState)("loading");return(0,l.useEffect)((()=>{e&&a(e)}),[e]),(0,l.useEffect)((()=>{if(n&&e){const t=new Image;t.onload=()=>{c("loaded")},t.onerror=()=>{c("error")},t.src=e}if(s){const e=s.status;if(404===e)c(404)}}),[n,s,e]),(0,o.jsx)("div",{className:(0,r.A)("h-[218px] overflow-hidden flex-center","error"==i&&"bg-red-100 dark:bg-red-200/60"),children:"loaded"==i?(0,o.jsx)("img",{className:"w-full h-full object-cover",src:e,alt:t}):"loading"==i?(0,o.jsx)("span",{children:(0,o.jsx)(m.A,{color:"rgb(21,91,117)"})}):404==i?(0,o.jsx)("span",{className:"text-lg text-orange-500",children:"File not found, removed maybe"}):(0,o.jsx)("span",{className:"text-lg text-red-800",children:"Load image error"})})},p=({url:e})=>(0,o.jsx)("div",{className:"p-2 overflow-hidden",children:(0,o.jsx)("embed",{className:"w-full h-full",src:e,type:"application/pdf"})}),f=({url:e})=>(0,o.jsx)("div",{className:"h-[218px]",children:(0,o.jsx)("video",{className:"w-full h-full object-cover",controls:!0,src:e})});var g=a(31210),v=a(90073);const b=({preview:e,flex:t,file_type:a,name:m,size:h,created_at:b,from_uid:w,content:j})=>{const[C,y]=(0,l.useState)(!1),{isExpired:N,setExpired:k}=(0,n.A)(),A=(0,s.GV)((e=>e.users.byId[w]),g.bN),E=(0,i.I3)(a,m,"icon w-9 h-12"),L=N(j);if((0,l.useEffect)((()=>{!L&&j&&(async e=>{try{(await fetch(e)).status>=400&&y(!0)}catch(t){console.warn(t),y(!0)}})(j)}),[j,L]),(0,l.useEffect)((()=>{C&&k(j)}),[C,j]),!j||L||C)return null;const H=(e=>{const{file_type:t,name:a="",content:l}=e;let r=null;const s={image:/^image/gi,audio:/^audio/gi,video:/^video/gi,code:/(json|javascript|java|rb|c|php|xml|css|html)$/gi,doc:/^text/gi,pdf:/\/pdf$/gi},n=a.split("."),i=t||n[n.length-1];switch(!0){case s.image.test(i):r=(0,o.jsx)(x,{url:l});break;case s.pdf.test(i):r=(0,o.jsx)(p,{url:l});break;case s.code.test(i):r=(0,o.jsx)(d,{url:l});break;case s.doc.test(i):r=(0,o.jsx)(u,{url:l});break;case s.audio.test(i):r=(0,o.jsx)(c,{url:l});break;case s.video.test(i):r=(0,o.jsx)(f,{url:l})}return r})({file_type:a,content:j,name:m}),V=e&&H&&!C&&!L;return(0,o.jsxs)("div",{className:(0,r.A)("rounded-md border border-solid border-gray-300 dark:border-gray-500 bg-gray-100 dark:bg-gray-900",t?"w-full max-w-3xl":"w-72 md:w-[370px]",V?"relative overflow-hidden h-[281px]":"h-[66px] ",a.startsWith("audio")&&"h-[125px]"),children:[(0,o.jsxs)("div",{className:"w-full p-2 flex items-center justify-between gap-2",children:[E,(0,o.jsxs)("div",{className:"flex flex-col gap-1 w-full overflow-hidden",children:[(0,o.jsx)("span",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200 truncate",children:m}),(0,o.jsxs)("em",{className:"text-xs text-gray-500 flex gap-4 not-italic",children:[(0,o.jsx)("span",{className:"size",children:(0,i.z3)(h)}),(0,o.jsx)("span",{className:"hidden md:block time",children:(0,i._T)(b)}),(0,o.jsxs)("span",{children:["by ",(0,o.jsx)("strong",{className:"font-bold",children:(null===A||void 0===A?void 0:A.name)||"Deleted User"})]})]})]}),(0,o.jsx)(v.A,{copyLink:j,downloadLink:`${j}&download=true`})]}),V&&(0,o.jsx)("div",{className:"h-[calc(100%_-_64px)] overflow-hidden",children:H})]})}},15710:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(91118),r=a(28512),s=a(31210);function n(){const[e,t]=(0,l.useState)(""),a=(0,r.GV)((e=>Object.values(e.channels.byId)),s.bN),[n,i]=(0,l.useState)([]);(0,l.useEffect)((()=>{if(e){let t=["",...e.toLowerCase(),""].join(".*"),l=new RegExp(t);i(a.filter((e=>!!e&&l.test(e.name.toLowerCase()))))}else i(a)}),[e]);return{input:e,channels:n,updateInput:e=>{t(e)}}}},28251:(e,t,a)=>{a.d(t,{A:()=>o});var l=a(91118),r=a(6858),s=a(20446),n=a(63133),i=a(45646);function o(e="right-start"){const[t,a]=(0,l.useState)(!1),[o,c]=(0,l.useState)({x:0,y:0}),d=()=>{a(!1)};return{ContextMenu:({key:e,items:a,children:l})=>(0,i.jsx)(r.Ay,{visible:t,followCursor:"initial",interactive:!0,placement:"right-start",popperOptions:{strategy:"fixed"},onClickOutside:d,content:(0,i.jsx)(n.A,{hideMenu:d,items:a}),children:l},e),offset:o,visible:t,hideContextMenu:d,handleContextMenuEvent:t=>{(0,s.cJ)(),t.preventDefault();const{currentTarget:l,clientX:r,clientY:n}=t,{left:i,top:o,width:d,height:u}=l.getBoundingClientRect();let m,h;"right-start"==e?(m=r-(i+d),h=o+u-n):(m=r-i,h=o-n),c({x:m,y:h}),a(!0)}}}},32038:(e,t,a)=>{a.d(t,{A:()=>i});var l,r=a(91118);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},s.apply(null,arguments)}const n=({title:e,titleId:t,...a},n)=>r.createElement("svg",s({width:16,height:16,viewBox:"0 0 16 16",fill:"#344054",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,l||(l=r.createElement("path",{d:"M2 3.75C2 3.33579 2.33579 3 2.75 3H10.25C10.6642 3 11 3.33579 11 3.75C11 4.16421 10.6642 4.5 10.25 4.5H2.75C2.33579 4.5 2 4.16421 2 3.75ZM2 11.75C2 11.3358 2.33579 11 2.75 11H9.25C9.66421 11 10 11.3358 10 11.75C10 12.1642 9.66421 12.5 9.25 12.5H2.75C2.33579 12.5 2 12.1642 2 11.75ZM2.75 7C2.33579 7 2 7.33579 2 7.75C2 8.16421 2.33579 8.5 2.75 8.5H13.25C13.6642 8.5 14 8.16421 14 7.75C14 7.33579 13.6642 7 13.25 7H2.75Z"}))),i=(0,r.forwardRef)(n)},34052:(e,t,a)=>{a.d(t,{A:()=>r});var l=a(84573);const r=()=>{const[e,t,a]=(0,l.B)("EXPIRED_FILES_MAP",{});return{setExpired:a=>{const l=new URL(a).searchParams.get("file_path");l&&!e[l]&&t((e=>({...e,[l]:Date.now()})))},isExpired:t=>{const a=new URL(t).searchParams.get("file_path");return!(!a||!e[a])},clearExpired:()=>{a()}}}},35889:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var l=a(91118),r=a(66514),s=a(26428),n=a.n(s),i=a(28512),o=a(14313),c=a(34052),d=a(23558),u=a(6858),m=a(40495),h=a(89341),x=a(94909),p=a(15710),f=a(83679),g=a(46598),v=a(45646);const b=({value:e="",updateSearchValue:t=null,embed:a=!1})=>{const{t:l}=(0,d.Bd)();return(0,v.jsxs)("div",{className:(0,r.A)("hidden md:block relative w-full py-1.5 px-4 shadow",a&&"py-2 shadow-none"),children:[(0,v.jsx)(g.A,{className:"absolute left-6 top-1/2 -translate-y-1/2"}),(0,v.jsx)("input",{value:e,onChange:e=>{t&&t(e.target.value)},className:"bg-black/5 dark:bg-black/20 rounded-full text-sm text-gray-500 py-2.5 pl-9",placeholder:`${l("action.search")}...`})]})},w=({select:e=0,updateFilter:t})=>{const{input:a,updateInput:l,channels:r}=(0,p.A)(),s=e=>{t({channel:e})};return(0,v.jsxs)("div",{className:"rounded-lg p-1 pt-0 bg-white dark:bg-gray-800 overflow-auto max-h-[400px] flex flex-col items-start relative drop-shadow",children:[(0,v.jsx)("div",{className:" bg-white dark:bg-gray-800 sticky top-0 z-10 w-full",children:(0,v.jsx)(b,{embed:!0,value:a,updateSearchValue:l})}),(0,v.jsxs)("ul",{className:"w-full flex flex-col gap-4 p-2",children:[(0,v.jsxs)("li",{className:"relative cursor-pointer flex items-center gap-2",onClick:s.bind(null,void 0),children:[(0,v.jsx)(x.A,{}),(0,v.jsx)("span",{className:"text-gray-500 dark:text-gray-100 font-semibold text-sm",children:"Any Channel"}),!e&&(0,v.jsx)(f.A,{className:"absolute right-0 top-1/2 -translate-y-1/2"})]}),r.map((({gid:t,is_public:a,name:l})=>(0,v.jsxs)("li",{className:"cursor-pointer flex items-center gap-2 justify-between",onClick:s.bind(null,t),children:[(0,v.jsx)(x.A,{personal:!a}),(0,v.jsx)("span",{className:"text-gray-500 dark:text-gray-100 font-semibold text-sm flex-1",children:l}),e==t&&(0,v.jsx)(f.A,{className:""})]},t)))]})]})},j={today:{title:"Today",duration:2222},in7d:{title:"Last 7 Days"},in30d:{title:"Last 30 Days"},in3m:{title:"Last 3 months"},in12m:{title:"Last 12 months"}},C=({select:e="",updateFilter:t})=>{const a=e=>{t({date:e})};return(0,v.jsx)("div",{className:"p-3 bg-white dark:bg-gray-800 min-w-[200px] overflow-auto rounded-lg flex flex-col items-start relative drop-shadow",children:(0,v.jsxs)("ul",{className:"w-full flex flex-col gap-4",children:[(0,v.jsxs)("li",{className:"relative cursor-pointer flex items-center gap-4 text-gray-500 dark:text-gray-300 font-semibold text-sm",onClick:a.bind(null,void 0),children:["Any Time",!e&&(0,v.jsx)(f.A,{className:"absolute right-0 top-1/2 -translate-y-1/2"})]}),Object.entries(j).map((([t,{title:l}])=>(0,v.jsxs)("li",{className:"relative cursor-pointer flex items-center gap-4 text-gray-500 dark:text-gray-300 font-semibold text-sm",onClick:a.bind(null,t),children:[l,e==t&&(0,v.jsx)(f.A,{className:"absolute right-0 -top-1/2 -translate-y-1/2"})]},l)))]})})};var y=a(62854),N=a(8548);const k=({select:e="",updateFilter:t})=>{const{input:a,updateInput:l,users:r}=(0,N.A)(),s=e=>{t({from:e})};return(0,v.jsxs)("div",{className:"rounded-lg p-1 pt-0 bg-white dark:bg-gray-800 overflow-auto max-h-[300px] flex flex-col items-start relative drop-shadow",children:[(0,v.jsx)("div",{className:"bg-white dark:bg-gray-800 sticky top-0 z-10 w-full",children:(0,v.jsx)(b,{embed:!0,value:a,updateSearchValue:l})}),(0,v.jsxs)("ul",{className:"w-full flex flex-col",children:[(0,v.jsxs)("li",{className:"relative cursor-pointer p-2.5 font-semibold text-sm text-gray-500",onClick:s.bind(null,void 0),children:["Anyone",!e&&(0,v.jsx)(f.A,{className:"absolute right-1.5 top-1/2 -translate-y-1/2"})]}),r.map((({uid:t})=>(0,v.jsxs)("li",{className:"relative flex items-center gap-2 justify-between cursor-pointer",onClick:s.bind(null,t),children:[(0,v.jsx)(y.A,{uid:t,interactive:!0}),e==t&&(0,v.jsx)(f.A,{className:""})]},t)))]})]})};var A=a(81256),E=a(89377),L=a(6288),H=a(86161),V=a(13796),_=a(24068),M=a(18423);const O={doc:{title:"Documents",icon:(0,v.jsx)(L.A,{className:"w-4 h-auto"})},pdf:{title:"PDFs",icon:(0,v.jsx)(V.A,{className:"w-4 h-auto"})},image:{title:"Images",icon:(0,v.jsx)(H.A,{className:"w-4 h-auto"})},audio:{title:"Audio",icon:(0,v.jsx)(A.A,{className:"w-4 h-auto"})},video:{title:"Videos",icon:(0,v.jsx)(M.A,{className:"w-4 h-auto"})},code:{title:"Code Snippets",icon:(0,v.jsx)(E.A,{className:"w-4 h-auto"})},unknown:{title:"Unknown Files",icon:(0,v.jsx)(_.A,{className:"w-4 h-auto"})}},Z=({select:e="",updateFilter:t})=>{const a=e=>{t({type:e})};return(0,v.jsx)("div",{className:"p-3 bg-white dark:bg-gray-800 min-w-[180px] overflow-auto shadow-md rounded-lg flex flex-col items-start relative",children:(0,v.jsxs)("ul",{className:"w-full flex flex-col gap-4",children:[(0,v.jsxs)("li",{className:"relative cursor-pointer flex items-center gap-4 text-gray-500 dark:text-gray-300 font-semibold text-sm",onClick:a.bind(null,void 0),children:["Any Type",!e&&(0,v.jsx)(f.A,{className:"absolute right-0 top-1/2 -translate-y-1/2"})]}),Object.entries(O).map((([t,{title:l,icon:r}])=>(0,v.jsxs)("li",{className:"relative cursor-pointer flex items-center gap-2 text-sm text-gray-500 dark:text-gray-300 font-semibold",onClick:a.bind(null,t),children:[r," ",l,e==t&&(0,v.jsx)(f.A,{className:"absolute right-0 top-1/2 -translate-y-1/2"})]},l)))]})})};var I=a(31210);const R=e=>(0,r.A)("cursor-pointer flex items-center gap-1 md:gap-2 shadow rounded-lg p-1 md:py-2 md:px-3 text-xs text-gray-900 dark:text-gray-200",e?"text-white bg-primary-400":"border border-solid border-gray-300 dark:border-gray-400 ");function S({filter:e,updateFilter:t}){const{t:a}=(0,d.Bd)("file"),[r,s]=(0,l.useState)({channel:!1,date:!1,from:!1,type:!1}),n=e=>{s((t=>({...t,...e})))},o=e=>{t(e);let a=Object.keys(e)[0];n({[a]:!1})},c=(0,i.GV)((e=>e.users.byId),I.bN),x=(0,i.GV)((e=>e.channels.byId),I.bN),{from:p,channel:f,type:g,date:b}=e,{channel:y,date:N,type:A,from:E}=r;return(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(u.Ay,{interactive:!0,onClickOutside:n.bind(null,{from:!1}),visible:E,placement:"bottom-start",content:(0,v.jsx)(k,{select:e.from,updateFilter:o}),children:(0,v.jsxs)("div",{className:R(p),onClick:n.bind(null,{from:!0}),children:[p&&(0,v.jsx)(m.A,{width:16,height:16,className:"rounded-full w-4 h-4",name:c[p].name,src:c[p].avatar}),(0,v.jsxs)("span",{className:"txt",children:[a("from")," ",p&&c[p].name]}),(0,v.jsx)(h.A,{className:"dark:stroke-gray-100"})]})}),(0,v.jsx)(u.Ay,{interactive:!0,onClickOutside:n.bind(null,{channel:!1}),visible:y,placement:"bottom-start",content:(0,v.jsx)(w,{select:e.channel,updateFilter:o}),children:(0,v.jsxs)("div",{className:R(f),onClick:n.bind(null,{channel:!0}),children:[(0,v.jsx)("span",{className:"txt",children:f?`In ${x[f].name}`:a("channel")}),(0,v.jsx)(h.A,{className:"dark:stroke-gray-100"})]})}),(0,v.jsx)(u.Ay,{interactive:!0,onClickOutside:n.bind(null,{type:!1}),visible:A,placement:"bottom-start",content:(0,v.jsx)(Z,{select:e.type,updateFilter:o}),children:(0,v.jsxs)("div",{className:R(g),onClick:n.bind(null,{type:!0}),children:[(0,v.jsx)("span",{className:"txt",children:g?O[g].title:a("type")}),(0,v.jsx)(h.A,{className:"dark:stroke-gray-100"})]})}),(0,v.jsx)(u.Ay,{interactive:!0,onClickOutside:n.bind(null,{date:!1}),visible:N,placement:"bottom-start",content:(0,v.jsx)(C,{select:e.date,updateFilter:o}),children:(0,v.jsxs)("div",{className:R(b),onClick:n.bind(null,{date:!0}),children:[(0,v.jsx)("span",{className:"txt",children:b?j[b].title:a("date")}),(0,v.jsx)(h.A,{className:"dark:stroke-gray-100"})]})})]})}var F=a(74671),B=a(81346),D=a(32038);const G=e=>(0,r.A)("cursor-pointer p-2 box-border flex-center",e&&"border border-solid border-primary-400 shadow rounded-lg");function P({view:e="item"}){const t=(0,I.wA)(),a=a=>{const{view:l}=a.currentTarget.dataset;l!=e&&t((0,F.PU)("item"==e?"grid":"item"))},l="grid"==e;return(0,v.jsxs)("ul",{className:"hidden md:flex border border-solid dark:border-gray-400 shadow rounded-lg box-border",children:[(0,v.jsx)("li",{className:G(!l),"data-view":"item",onClick:a,children:(0,v.jsx)(D.A,{className:(l?"":"fill-primary-400")+" dark:fill-gray-400"})}),(0,v.jsx)("li",{className:G(l),"data-view":"grid",onClick:a,children:(0,v.jsx)(B.A,{className:(l?"fill-primary-400":"")+" dark:fill-gray-400"})})]})}let $;const U=function(){const{isExpired:e}=(0,c.A)(),t=(0,l.useRef)(),[a,s]=(0,l.useState)({}),d=(0,i.GV)((e=>e.ui.fileListView.view),I.bN),u=(0,i.GV)((e=>e.message),I.bN),m=(0,i.GV)((e=>e.fileMessage),I.bN),h=(0,i.GV)((e=>e.channelMessage),I.bN);return(0,l.useEffect)((()=>{if("grid"==d&&t){const e=t.current;if(!e)return;const a=e.getBoundingClientRect().width-32,l=Math.floor(a/368),r=a%368,s=Math.max(Math.floor(r/(l-1)),8);$=new(n())(e,{fitWidth:!0,gutter:s,itemSelector:".grid-box"})}else $&&$.destroy()}),[d,a]),(0,v.jsxs)("div",{className:"h-screen md:overflow-y-scroll flex flex-col items-start my-2 mr-6 rounded-2xl bg-white dark:bg-gray-700",children:[(0,v.jsx)(b,{value:a.name,updateSearchValue:e=>{s((t=>({...t,name:e})))}}),(0,v.jsxs)("div",{className:"flex justify-between w-full px-4 py-5",children:[(0,v.jsx)(S,{filter:a,updateFilter:e=>{s((t=>({...t,...e})))}}),(0,v.jsx)(P,{view:d})]}),(0,v.jsx)("div",{className:(0,r.A)("w-full h-full px-4 overflow-scroll flex","item"==d&&"gap-2 flex-col","grid"==d&&"flex-wrap"),ref:t,children:m.map((t=>{const l=u[t];if(!l)return null;const r=((e,t,a)=>{let l=!0;const{mid:r,from_uid:s,properties:n}=e,{name:i,from:o,channel:c}=t,d=n?n.name:"";if(o&&o!=s&&(l=!1),c&&-1==a[c].findIndex((e=>e==r))&&(l=!1),i){let e=["",...i.toLowerCase(),""].join(".*");new RegExp(e).test(d)||(l=!1)}return l})(l,a,h);if(!r)return null;const{mid:s,thumbnail:n,content:i,created_at:c,from_uid:m,properties:x}=l,{name:p,content_type:f,size:g}=null!==x&&void 0!==x?x:{};return e(n||i)?null:(0,v.jsx)("div",{className:"grid-box mb-2",children:(0,v.jsx)(o.A,{preview:"grid"==d,flex:"item"==d,file_type:f,content:n||i,created_at:c,from_uid:m,size:g,name:p},s)},s)}))})]})}},46598:(e,t,a)=>{a.d(t,{A:()=>i});var l,r=a(91118);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},s.apply(null,arguments)}const n=({title:e,titleId:t,...a},n)=>r.createElement("svg",s({width:24,height:24,viewBox:"0 0 24 24",fill:"#70707B",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,l||(l=r.createElement("path",{d:"M10 2.5C14.1421 2.5 17.5 5.85786 17.5 10C17.5 11.7101 16.9276 13.2866 15.964 14.5483L20.7071 19.2929C21.0976 19.6834 21.0976 20.3166 20.7071 20.7071C20.3466 21.0676 19.7794 21.0953 19.3871 20.7903L19.2929 20.7071L14.5483 15.964C13.2866 16.9276 11.7101 17.5 10 17.5C5.85786 17.5 2.5 14.1421 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5ZM10 4.5C6.96243 4.5 4.5 6.96243 4.5 10C4.5 13.0376 6.96243 15.5 10 15.5C13.0376 15.5 15.5 13.0376 15.5 10C15.5 6.96243 13.0376 4.5 10 4.5Z"}))),i=(0,r.forwardRef)(n)},57183:(e,t,a)=>{a.d(t,{A:()=>i});var l,r=a(91118);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},s.apply(null,arguments)}const n=({title:e,titleId:t,...a},n)=>r.createElement("svg",s({width:20,height:20,viewBox:"0 0 20 20",fill:"#616161",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,l||(l=r.createElement("path",{d:"M6.48667 11.6667L6.83667 8.33333H3.325V6.66667H7L7.43333 2.5H9.10833L8.66667 6.66667H11.9833L12.4167 2.5H14.0917L13.65 6.66667H16.625V8.33333H13.4667L13.1167 11.6667H16.6167V13.3333H12.9333L12.4917 17.5H10.8083L11.2417 13.3333H7.91667L7.475 17.5H5.8L6.23333 13.3333H3.25V11.6667H6.4H6.48667ZM8.1625 11.6667H11.4875L11.8375 8.33333H8.5125L8.1625 11.6667Z"}))),i=(0,r.forwardRef)(n)},62854:(e,t,a)=>{a.d(t,{A:()=>E});var l,r,s,n=a(91118),i=a(86938),o=a(6858),c=a(66514),d=a(28512),u=a(28251);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},m.apply(null,arguments)}const h=({title:e,titleId:t,...a},i)=>n.createElement("svg",m({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,l||(l=n.createElement("circle",{cx:8,cy:8,r:8,fill:"#155EEF"})),n.createElement("mask",{id:"mask0_19353_2918",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:12,height:12},r||(r=n.createElement("rect",{x:2,y:2,width:12,height:12,fill:"#D9D9D9"}))),s||(s=n.createElement("g",{mask:"url(#mask0_19353_2918)"},n.createElement("path",{d:"M4.5 12.5C4.35833 12.5 4.23958 12.4521 4.14375 12.3562C4.04792 12.2604 4 12.1417 4 12V10C4 9.725 4.09792 9.48958 4.29375 9.29375C4.48958 9.09792 4.725 9 5 9H11C11.275 9 11.5104 9.09792 11.7062 9.29375C11.9021 9.48958 12 9.725 12 10V12C12 12.1417 11.9521 12.2604 11.8562 12.3562C11.7604 12.4521 11.6417 12.5 11.5 12.5H4.5ZM6.5 8.5C5.80833 8.5 5.21875 8.25625 4.73125 7.76875C4.24375 7.28125 4 6.69167 4 6C4 5.30833 4.24375 4.71875 4.73125 4.23125C5.21875 3.74375 5.80833 3.5 6.5 3.5H9.5C10.1917 3.5 10.7812 3.74375 11.2687 4.23125C11.7562 4.71875 12 5.30833 12 6C12 6.69167 11.7562 7.28125 11.2687 7.76875C10.7812 8.25625 10.1917 8.5 9.5 8.5H6.5ZM5 11.5H11V10H5V11.5ZM6.5 7.5H9.5C9.91667 7.5 10.2708 7.35417 10.5625 7.0625C10.8542 6.77083 11 6.41667 11 6C11 5.58333 10.8542 5.22917 10.5625 4.9375C10.2708 4.64583 9.91667 4.5 9.5 4.5H6.5C6.08333 4.5 5.72917 4.64583 5.4375 4.9375C5.14583 5.22917 5 5.58333 5 6C5 6.41667 5.14583 6.77083 5.4375 7.0625C5.72917 7.35417 6.08333 7.5 6.5 7.5ZM6.5 6.5C6.64167 6.5 6.76042 6.45208 6.85625 6.35625C6.95208 6.26042 7 6.14167 7 6C7 5.85833 6.95208 5.73958 6.85625 5.64375C6.76042 5.54792 6.64167 5.5 6.5 5.5C6.35833 5.5 6.23958 5.54792 6.14375 5.64375C6.04792 5.73958 6 5.85833 6 6C6 6.14167 6.04792 6.26042 6.14375 6.35625C6.23958 6.45208 6.35833 6.5 6.5 6.5ZM9.5 6.5C9.64167 6.5 9.76042 6.45208 9.85625 6.35625C9.95208 6.26042 10 6.14167 10 6C10 5.85833 9.95208 5.73958 9.85625 5.64375C9.76042 5.54792 9.64167 5.5 9.5 5.5C9.35833 5.5 9.23958 5.54792 9.14375 5.64375C9.04792 5.73958 9 5.85833 9 6C9 6.14167 9.04792 6.26042 9.14375 6.35625C9.23958 6.45208 9.35833 6.5 9.5 6.5Z",fill:"white"})))),x=(0,n.forwardRef)(h);var p=a(97879),f=a(40495),g=a(51461),v=a(23558),b=a(39837),w=a(63133),j=a(45646);const C=({enable:e=!1,uid:t,cid:a,visible:l,hide:r,children:s})=>{const{t:n}=(0,v.Bd)("member"),{t:i}=(0,v.Bd)("chat"),{blockThisContact:c,removeFromContact:d,copyEmail:u,canCopyEmail:m,startChat:h,canRemove:x,canRemoveFromContact:p,canBlock:f,canRemoveFromChannel:g,removeFromChannel:C,removeUser:y,isAdmin:N,canUpdateRole:k,updateRole:A}=(0,b.A)({uid:t,cid:a});return(0,j.jsx)(o.Ay,{disabled:!e,visible:l,followCursor:"initial",interactive:!0,placement:"right-start",popperOptions:{strategy:"fixed"},onClickOutside:r,content:(0,j.jsx)(w.A,{hideMenu:r,items:[{title:n("send_msg"),handler:h},m&&{title:n("copy_email"),handler:u},k&&{title:n("roles"),handler:A,subs:[{title:n("set_normal"),checked:!N,handler:A},{title:n("set_admin"),checked:N,handler:A}]},g&&{danger:!0,title:n("remove_from_channel"),handler:C},p&&{danger:!0,title:n("remove_from_contact"),handler:d},f&&{danger:!0,title:i("block"),handler:c},x&&{danger:!0,title:n("remove"),handler:y}].filter(Boolean)}),children:s},t)};var y=a(31210),N=a(86560),k=a(8249);const A=({cid:e,uid:t,dm:a=!1,interactive:l=!0,popover:r=!1,compact:s=!1,avatarSize:n=32,enableContextMenu:m=!1,enableNavToSetting:h=!1,...v})=>{const b=(0,i.Zp)(),{visible:w,handleContextMenuEvent:A,hideContextMenu:E}=(0,u.A)(),L=(0,d.GV)((e=>e.users.byId[t]),y.bN),H=(0,d.GV)((e=>{var t;return null===(t=e.authData.user)||void 0===t?void 0:t.uid}),y.bN),V=(0,d.GV)((e=>e.server.show_user_online_status),y.bN),_=()=>{b(`/chat/dm/${t}`)};if(!L)return null;const M=L.online||L.uid==H,O=(0,c.A)("relative flex items-center justify-start gap-2 rounded-lg select-none",l&&"md:hover:bg-gray-500/10",s?"p-0":"p-2",h&&"cursor-pointer"),Z=(0,c.A)("text-sm text-gray-500 max-w-[190px] truncate font-semibold dark:text-white"),I=!!L.widget_id,R="absolute -bottom-[2.5px] -right-[2.5px] border-content rounded-full border-[1px] border-white dark:border-gray-300",S=(0,c.A)(R,M?"bg-green-500":"bg-zinc-400",s?"w-[15px] h-[15px]":"w-3 h-3"),F=L.is_bot?(0,j.jsx)("div",{className:R,children:(0,j.jsx)(x,{className:s?"w-[15px] h-[15px]":"w-3 h-3"})}):V?(0,j.jsx)("div",{className:S}):null;return r?(0,j.jsx)(C,{cid:e,uid:t,enable:m,visible:w,hide:E,children:(0,j.jsx)(o.Ay,{inertia:!0,interactive:!0,placement:"left",trigger:"click",content:(0,j.jsx)(g.A,{uid:t,type:"card",cid:e}),children:(0,j.jsxs)("div",{className:O,onDoubleClick:a?_:void 0,onContextMenu:m?A:void 0,...v,children:[(0,j.jsxs)("div",{className:"cursor-pointer relative",style:{width:`${n}px`,height:`${n}px`},children:[(0,j.jsx)(f.A,{className:"w-full h-full rounded-full object-cover",width:n,height:n,src:L.avatar,name:L.name,alt:"avatar"}),F]}),!s&&(0,j.jsx)("span",{className:Z,title:null===L||void 0===L?void 0:L.name,children:(0,j.jsx)(k.A,{uid:t,name:(null===L||void 0===L?void 0:L.name)||""})}),!s&&L.is_admin&&!L.is_bot&&(0,j.jsx)(p.A,{})]})})}):(0,j.jsx)(C,{cid:e,uid:t,enable:m,visible:w,hide:E,children:(0,j.jsxs)("div",{className:O,onClick:h?()=>{b(`/setting/dm/${t}/overview?f=/chat/dm/${t}`)}:void 0,onDoubleClick:a?_:void 0,onContextMenu:m?A:void 0,...v,children:[(0,j.jsxs)("div",{className:"cursor-pointer relative",style:{width:`${n}px`,height:`${n}px`},children:[(0,j.jsx)(f.A,{className:(0,N.cn)("size-full rounded-full object-cover",I&&"ring-2 ring-orange-500"),title:L.widget_id,width:n,height:n,src:L.avatar,name:L.name,alt:"avatar"}),F]}),!s&&(0,j.jsx)("span",{className:Z,title:null===L||void 0===L?void 0:L.name,children:(0,j.jsx)(k.A,{uid:t,name:(null===L||void 0===L?void 0:L.name)||""})}),!s&&L.is_admin&&!L.is_bot&&(0,j.jsx)(p.A,{})]})})},E=(0,n.memo)(A,((e,t)=>e.uid==t.uid))},81346:(e,t,a)=>{a.d(t,{A:()=>i});var l,r=a(91118);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},s.apply(null,arguments)}const n=({title:e,titleId:t,...a},n)=>r.createElement("svg",s({width:16,height:16,viewBox:"0 0 16 16",fill:"#344054",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,l||(l=r.createElement("path",{d:"M3.5 2C2.67157 2 2 2.67157 2 3.5V5.5C2 6.32843 2.67157 7 3.5 7H5.5C6.32843 7 7 6.32843 7 5.5V3.5C7 2.67157 6.32843 2 5.5 2H3.5ZM10.5 2C9.67157 2 9 2.67157 9 3.5V5.5C9 6.32843 9.67157 7 10.5 7H12.5C13.3284 7 14 6.32843 14 5.5V3.5C14 2.67157 13.3284 2 12.5 2H10.5ZM3.5 9C2.67157 9 2 9.67157 2 10.5V12.5C2 13.3284 2.67157 14 3.5 14H5.5C6.32843 14 7 13.3284 7 12.5V10.5C7 9.67157 6.32843 9 5.5 9H3.5ZM10.5 9C9.67157 9 9 9.67157 9 10.5V12.5C9 13.3284 9.67157 14 10.5 14H12.5C13.3284 14 14 13.3284 14 12.5V10.5C14 9.67157 13.3284 9 12.5 9H10.5Z"}))),i=(0,r.forwardRef)(n)},89341:(e,t,a)=>{a.d(t,{A:()=>i});var l,r=a(91118);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},s.apply(null,arguments)}const n=({title:e,titleId:t,...a},n)=>r.createElement("svg",s({width:20,height:20,viewBox:"0 0 20 20",stroke:"#344054",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,l||(l=r.createElement("path",{d:"M5 7.5L10 12.5L15 7.5",strokeWidth:1.67,strokeLinecap:"round",strokeLinejoin:"round"}))),i=(0,r.forwardRef)(n)},90073:(e,t,a)=>{a.d(t,{A:()=>u});var l,r=a(24168),s=a(91118);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n.apply(null,arguments)}const i=({title:e,titleId:t,...a},r)=>s.createElement("svg",n({width:24,height:24,viewBox:"0 0 24 24",fill:"#fff",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,l||(l=s.createElement("path",{d:"M16.5303 11.7204L16.4462 11.6478C16.1526 11.4299 15.7359 11.4541 15.4697 11.7204L12.7503 14.4397L12.75 7.75003L12.7432 7.64826C12.6935 7.28218 12.3797 7.00003 12 7.00003L11.8982 7.00688C11.5322 7.05654 11.25 7.37033 11.25 7.75003L11.2503 14.4417L8.52961 11.7198L8.4455 11.6472C8.15193 11.4293 7.73527 11.4534 7.46895 11.7196C7.176 12.0124 7.17591 12.4873 7.46875 12.7803L11.4687 16.7818L11.5529 16.8544C11.8465 17.0724 12.2632 17.0482 12.5295 16.7819L16.5303 12.7811L16.6029 12.6969C16.8208 12.4033 16.7966 11.9867 16.5303 11.7204ZM6.25 3C4.45507 3 3 4.45507 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C19.5449 21 21 19.5449 21 17.75V6.25C21 4.45507 19.5449 3 17.75 3H6.25ZM4.5 6.25C4.5 5.2835 5.2835 4.5 6.25 4.5H17.75C18.7165 4.5 19.5 5.2835 19.5 6.25V17.75C19.5 18.7165 18.7165 19.5 17.75 19.5H6.25C5.2835 19.5 4.5 18.7165 4.5 17.75V6.25Z"}))),o=(0,s.forwardRef)(i);var c=a(7933),d=a(45646);const u=({copyLink:e,downloadLink:t})=>{const{copy:a,copied:l}=(0,r.A)();return(0,d.jsxs)("div",{className:"flex flex-col-reverse gap-1.5 items-center",children:[(0,d.jsx)("button",{className:"hidden md:block whitespace-nowrap",disabled:l,onClick:a.bind(null,e,!1),children:(0,d.jsx)(c.A,{className:"size-6 fill-gray-500 dark:fill-gray-400"})}),(0,d.jsx)("a",{className:"hidden md:block whitespace-nowrap",download:name,href:t,children:(0,d.jsx)(o,{className:"fill-gray-500 dark:fill-gray-400"})})]})}},94909:(e,t,a)=>{a.d(t,{A:()=>u});var l,r,s=a(91118);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n.apply(null,arguments)}const i=({title:e,titleId:t,...a},i)=>s.createElement("svg",n({width:20,height:20,viewBox:"0 0 20 20",fill:"#616161",xmlns:"http://www.w3.org/2000/svg",ref:i,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,l||(l=s.createElement("path",{d:"M6.83667 8.33333L6.48667 11.6667H6.4H3.25V13.3333H6.23333L5.8 17.5H7.475L7.91667 13.3333H11.2417L10.8083 17.5H12.4917L12.9333 13.3333H16.6167V11.6667H13.1167L13.2917 10H11.6625L11.4875 11.6667H8.1625L8.5125 8.33333H10.8334V6.66667H8.66667L9.10833 2.5H7.43333L7 6.66667H3.325V8.33333H6.83667Z"})),r||(r=s.createElement("path",{d:"M16.6875 4.16675V3.33341C16.6875 2.40008 15.875 1.66675 15 1.66675C14.125 1.66675 13.3333 2.40008 13.3333 3.33341V4.16675C12.8731 4.16675 12.5 4.53985 12.5 5.00008V7.50008C12.5 7.96031 12.8731 8.33341 13.3333 8.33341H15H16.6667C17.1269 8.33341 17.5 7.96031 17.5 7.50008V4.97925C17.5 4.53051 17.1362 4.16675 16.6875 4.16675ZM15.8333 4.16675H14.1667V3.33341C14.1667 2.85722 14.5556 2.50008 15 2.50008C15.4444 2.50008 15.8333 2.85722 15.8333 3.33341V4.16675Z"}))),o=(0,s.forwardRef)(i);var c=a(57183),d=a(45646);const u=({personal:e=!1,muted:t=!1,className:a=""})=>(0,d.jsx)("div",{className:`flex ${t?"!text-gray-400":""} ${a}`,children:e?(0,d.jsx)(o,{className:"dark:fill-gray-300"}):(0,d.jsx)(c.A,{className:"dark:fill-gray-300"})})},97879:(e,t,a)=>{a.d(t,{A:()=>c});var l,r,s,n=a(91118);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},i.apply(null,arguments)}const o=({title:e,titleId:t,...a},o)=>n.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:o,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,l||(l=n.createElement("path",{d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z",fill:"url(#paint0_linear_14171_23293)"})),r||(r=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.2431 5.96725C12.4162 5.86325 12.6357 5.87375 12.7982 5.99425C12.9602 6.11525 13.0342 6.32125 12.9857 6.51725L11.9857 10.5173C11.9297 10.7403 11.7297 10.8963 11.5002 10.8963H4.50018C4.27068 10.8963 4.07068 10.7397 4.01468 10.5173L3.01468 6.51725C2.96618 6.32125 3.04018 6.11525 3.20218 5.99425C3.36518 5.87425 3.58418 5.86375 3.75768 5.96725L5.84918 7.22225L7.58468 4.61875C7.59654 4.60096 7.61307 4.58921 7.62965 4.57743C7.63964 4.57033 7.64966 4.56321 7.65868 4.55475L7.17718 4.07275C7.08018 3.97575 7.08018 3.81625 7.17718 3.71925L7.82368 3.07275C7.92068 2.97575 8.08018 2.97575 8.17718 3.07275L8.82368 3.71925C8.92068 3.81625 8.92068 3.97575 8.82368 4.07275L8.34218 4.55475C8.3512 4.56338 8.3614 4.57062 8.37161 4.57787C8.38802 4.58951 8.40447 4.60119 8.41618 4.61875L10.1517 7.22225L12.2431 5.96725ZM4.00025 11.3962H12.0002V12.3963H4.00025V11.3962Z",fill:"#ECE9FE"})),s||(s=n.createElement("defs",null,n.createElement("linearGradient",{id:"paint0_linear_14171_23293",x1:0,y1:0,x2:16,y2:-1.66785e-9,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#7F56D9"}),n.createElement("stop",{offset:1,stopColor:"#9E77ED"}))))),c=(0,n.forwardRef)(o)}}]);