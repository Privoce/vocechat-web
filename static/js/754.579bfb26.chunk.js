"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[754],{15402:(e,r,a)=>{a.d(r,{A:()=>i});var t,s,l=a(53142);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const o=({title:e,titleId:r,...a},o)=>l.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 20 20",color:"#78787c",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgb(120, 120, 124)"},ref:o,"aria-labelledby":r},a),e?l.createElement("title",{id:r},e):null,t||(t=l.createElement("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"})),s||(s=l.createElement("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"}))),i=(0,l.forwardRef)(o)},7926:(e,r,a)=>{a.d(r,{A:()=>i});var t,s,l=a(53142);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const o=({title:e,titleId:r,...a},o)=>l.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 20 20",color:"#78787c",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgb(120, 120, 124)"},ref:o,"aria-labelledby":r},a),e?l.createElement("title",{id:r},e):null,t||(t=l.createElement("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"})),s||(s=l.createElement("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"}))),i=(0,l.forwardRef)(o)},7953:(e,r,a)=>{a.d(r,{A:()=>i});var t,s,l=a(53142);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const o=({title:e,titleId:r,...a},o)=>l.createElement("svg",n({width:20,height:20,viewBox:"0 0 20 20",stroke:"#088AB2",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:o,"aria-labelledby":r},a),e?l.createElement("title",{id:r},e):null,t||(t=l.createElement("g",{clipPath:"url(#clip0_1130_82786)"},l.createElement("path",{d:"M9.99984 13.3334V10M9.99984 6.66669H10.0082M18.3332 10C18.3332 14.6024 14.6022 18.3334 9.99984 18.3334C5.39746 18.3334 1.6665 14.6024 1.6665 10C1.6665 5.39765 5.39746 1.66669 9.99984 1.66669C14.6022 1.66669 18.3332 5.39765 18.3332 10Z",strokeWidth:1.66667,strokeLinecap:"round",strokeLinejoin:"round"}))),s||(s=l.createElement("defs",null,l.createElement("clipPath",{id:"clip0_1130_82786"},l.createElement("rect",{width:20,height:20}))))),i=(0,l.forwardRef)(o)},54481:(e,r,a)=>{a.d(r,{A:()=>i});var t=a(53142),s=a(73911),l=a(15402),n=a(7926),o=a(8326);const i=({type:e="text",prefix:r="",className:a="",...i})=>{const[c,d]=(0,t.useState)(e),u=a.includes("large"),m=a.includes("none"),x="password"==e,p=(0,s.A)("w-full text-sm text-gray-800 dark:text-gray-200 p-2 outline-none \n    bg-inherit\n  disabled:text-gray-500 disabled:bg-gray-100 \n  dark:disabled:text-gray-500 \n  dark:disabled:bg-gray-800/50\n  dark:disabled:border-gray-600 \n  placeholder:text-gray-400",u&&"py-3",m&&"!border-none bg-transparent shadow-none",x&&"pr-[30px]");return"password"==e?(0,o.jsxs)("div",{className:`w-full relative flex overflow-hidden rounded border border-solid border-gray-200 dark:border-gray-400 shadow-sm ${a}`,children:[(0,o.jsx)("input",{type:c,autoComplete:"password"==c?"current-password":"on",className:`${p} ${a}`,...i}),(0,o.jsx)("div",{className:"absolute top-1/2 right-2.5 -translate-y-1/2 cursor-pointer",onClick:()=>{d((e=>"password"==e?"text":"password"))},children:"password"==c?(0,o.jsx)(l.A,{className:"fill-gray-500"}):(0,o.jsx)(n.A,{className:"fill-gray-500"})})]}):r?(0,o.jsxs)("div",{className:`w-full relative flex overflow-hidden rounded border border-solid border-gray-200 dark:border-gray-400 shadow-sm bg-white dark:bg-gray-800 ${a}`,children:["string"===typeof r?(0,o.jsx)("span",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 shadow-[rgb(0_0_0_/_10%)_-1px_0px_0px_inset]",children:r}):(0,o.jsx)("span",{className:"flex-center p-2 bg-transparent",children:r}),(0,o.jsx)("input",{className:`${p} ${a}`,type:e,...i})]}):(0,o.jsx)("input",{type:c,className:`${p} rounded border border-solid border-gray-200 dark:border-gray-400 shadow-sm ${a}`,...i})}},5204:(e,r,a)=>{a.d(r,{A:()=>o});var t=a(78241),s=a(53142),l=a(8326);const n=[],o=({disabled:e=!1,options:r,values:a=n,value:o="",defaultValue:i="",onChange:c})=>{const d=(0,s.useId)(),[u,m]=(0,s.useState)(i),x=""!==o?o:u;return(0,l.jsx)("form",{className:"w-full flex flex-col gap-2",children:r.map(((r,s)=>(0,l.jsxs)("div",{className:(0,t.cn)("relative bg-transparent",e&&"grayscale-[0.8]"),children:[(0,l.jsx)("input",{disabled:e,className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer peer z-50",type:"radio",checked:(a!==n?a.indexOf(x):x)===s,onChange:()=>{const e=a===n?s:a[s];""===o&&m(e),c&&c(e)},id:`${d}-${s}`}),(0,l.jsx)("div",{className:"drop-shadow-sm text-left px-2 py-3 border border-solid border-gray-300 dark:border-gray-400 rounded-lg w-full h-full bg-white dark:bg-gray-800 peer-checked:bg-primary-400 text-sm text-gray-500 dark:text-gray-300  peer-checked:text-white",children:(0,l.jsx)("label",{className:"ml-6",htmlFor:`${d}-${s}`,children:r})}),(0,l.jsx)("div",{className:"absolute top-1/2 left-3 -translate-y-1/2 w-3.5 h-3.5 rounded-full border border-solid border-gray-300 peer-checked:hidden"}),(0,l.jsx)("div",{className:"absolute top-1/2 left-3 -translate-y-1/2 w-3.5 h-3.5 rounded-full border border-solid border-white invisible peer-checked:visible flex-center",children:(0,l.jsx)("div",{className:"w-1 h-1 bg-white rounded-full"})})]},s)))})}},59695:(e,r,a)=>{a.d(r,{A:()=>x});var t=a(53142),s=a(76198),l=a(93832),n=a(38952),o=a(25391),i=a(29057),c=a(11600);const d=(0,s.hU)()[4].value,u=(0,s.mM)()[0].value,m={expire:d,times:u};function x(e){const[r,a]=(0,t.useState)(""),s=(0,o.GV)((r=>r.channels.byId[null!==e&&void 0!==e?e:0]),c.bN),{data:x,isSuccess:p}=(0,n.Q0)(),[g,{data:h,isLoading:f}]=(0,l.L3)(),[b,{data:v,isLoading:w}]=(0,l.Wy)(),{copied:y,copy:j}=(0,i.A)({enableToast:!1});(0,t.useEffect)((()=>{!e||null!==s&&void 0!==s&&s.is_public?g({expire:d,times:u}):b({cid:e,expire:d,times:u})}),[e,s]),(0,t.useEffect)((()=>{const e=h||v;e&&p&&a(e)}),[h,v,p]);return{enableSMTP:x,generating:w||f,generateNewLink:(r=m)=>{const{expire:a,times:t}=r;!e||null!==s&&void 0!==s&&s.is_public?g({expire:a,times:t}):b({cid:e,expire:a,times:t})},link:r,linkCopied:y,copyLink:()=>{j(r)}}}},21206:(e,r,a)=>{a.r(r),a.d(r,{default:()=>R});var t=a(53142),s=a(81817);const l=(0,t.createContext)(null);const n=()=>{const e=(0,t.useContext)(l);return e},o=(0,t.memo)((({header:e,footer:r,children:a,onStepChange:s,wrapper:n,startIndex:o=0})=>{const[i,c]=(0,t.useState)(o),[d,u]=(0,t.useState)(!1),m=(0,t.useRef)(!0),x=(0,t.useRef)(!1),p=(0,t.useRef)((()=>{})),g=t.Children.toArray(a).length;m.current=i<g-1,x.current=i>0;const h=(0,t.useCallback)((()=>{if(m.current){const e=i+1;c(e),null==s||s(e)}}),[i,s]),f=(0,t.useCallback)((()=>{if(x.current){p.current=null;const e=i-1;c(e),null==s||s(e)}}),[i,s]),b=(0,t.useCallback)((e=>{e>=0&&e<g&&(p.current=null,c(e),null==s||s(e))}),[g,s]),v=(0,t.useRef)((e=>{p.current=e})),w=(0,t.useCallback)((async()=>{if(m.current&&p.current)try{u(!0),await p.current(),u(!1),p.current=null,h()}catch(e){throw u(!1),e}else h()}),[h]),y=(0,t.useMemo)((()=>({nextStep:w,previousStep:f,handleStep:v.current,isLoading:d,activeStep:i,stepCount:g,isFirstStep:!x.current,isLastStep:!m.current,goToStep:b})),[w,f,d,i,g,b]),j=(0,t.useMemo)((()=>t.Children.toArray(a)[i]),[i,a,e,r]),N=(0,t.useMemo)((()=>n?(0,t.cloneElement)(n,{children:j}):j),[n,j]);return(0,t.createElement)(l.Provider,{value:y},e,N,r)}));var i=a(73911),c=a(79434);const d=[{name:"welcomePage",label:(0,c.t)("welcome:onboarding.welcome_page")},{name:"serverName",label:(0,c.t)("welcome:onboarding.set_name")},{name:"adminAccount",label:(0,c.t)("welcome:onboarding.admin_account")},{name:"whoCanSignUp",label:(0,c.t)("welcome:onboarding.who_sign_up")},{name:"inviteLink",label:(0,c.t)("welcome:onboarding.invites"),canJumpTo:["whoCanSignUp"]},{name:"donePage",label:(0,c.t)("welcome:onboarding.done"),canJumpTo:["whoCanSignUp","inviteLink"]}];var u=a(5263),m=a(11600),x=a(87645),p=a(38952),g=a(90080),h=a(25391),f=a(31029),b=a(54481),v=a(8326);const w=({serverName:e})=>{const{t:r}=(0,s.Bd)("welcome",{keyPrefix:"onboarding"}),{nextStep:a}=n(),l=(0,t.useRef)(null),o=(0,h.GV)((e=>!!e.authData.token),m.bN),i=(0,m.wA)(),[c,{isLoading:d,isError:w,isSuccess:y}]=(0,p.mi)(),[j,{isLoading:N,isError:k}]=(0,x._L)(),[_,{isLoading:C,isSuccess:A}]=(0,p.NI)(),[S,E]=(0,t.useState)(""),[L,P]=(0,t.useState)(""),[B,R]=(0,t.useState)("");return(0,t.useEffect)((()=>{w&&u.Ay.error("Failed to sign up")}),[w]),(0,t.useEffect)((()=>{y&&j({email:S,password:L,type:"password"})}),[y]),(0,t.useEffect)((()=>{k&&u.Ay.error("Login failed")}),[k]),(0,t.useEffect)((()=>{o&&(i((0,g.K3)(!0)),_({name:e}))}),[o]),(0,t.useEffect)((()=>{A&&a()}),[A]),(0,v.jsxs)("div",{className:"h-full flex-center flex-col text-center w-[360px] m-auto dark:text-gray-100",children:[(0,v.jsx)("span",{className:"text-2xl mb-2 font-bold",children:r("admin_title")}),(0,v.jsx)("span",{className:"text-sm mb-6",children:r("admin_desc")}),(0,v.jsxs)("form",{ref:l,action:"/",className:"flex flex-col gap-2 w-full",children:[(0,v.jsx)(b.A,{className:"large",placeholder:"Enter your email",type:"email",required:!0,value:S,onChange:e=>E(e.target.value)}),(0,v.jsx)(b.A,{className:"large",type:"password",required:!0,minLength:6,placeholder:"Enter your password",value:L,onChange:e=>P(e.target.value)}),(0,v.jsx)(b.A,{className:"large",type:"password",required:!0,minLength:6,placeholder:"Confirm your password",value:B,onChange:e=>R(e.target.value)})]}),(0,v.jsx)(f.A,{className:"mt-6 w-full",onClick:async()=>{const e=null===l||void 0===l?void 0:l.current;if(e){if(!e.checkValidity())return void e.reportValidity();c({email:S,name:"Admin",password:L,gender:0})}},children:d||N||C?"...":r("sign")})]})};var y=a(94727);const j=a.p+"static/media/play.ada446bc1d007eef6447.svg";function N({serverName:e}){const{t:r}=(0,s.Bd)("welcome",{keyPrefix:"onboarding"}),a=(0,y.Zp)();return(0,v.jsxs)("div",{className:"h-full px-2 flex-center flex-col text-center md:w-[588px] m-auto dark:text-gray-100",children:[(0,v.jsx)("span",{className:"text-2xl font-bold mb-2",children:r("done_welcome",{serverName:e})}),(0,v.jsx)("span",{className:"text-sm mb-12",children:r("done_title")}),(0,v.jsx)("span",{className:"text-xl mb-12",children:(0,v.jsx)(s.x6,{i18nKey:"onboarding.done_desc",ns:"welcome",children:(0,v.jsx)("span",{className:"font-bold"})})}),(0,v.jsxs)(f.A,{className:"!w-32 h-auto flex flex-col items-center py-3",onClick:()=>a("/"),children:[(0,v.jsx)("img",{className:"mb-2",src:j,alt:"play icon"}),(0,v.jsx)("span",{className:"text-sm",children:r("enter")})]})]})}var k=a(59695),_=a(7953);const C=({refreshInviteLink:e})=>{const{t:r}=(0,s.Bd)("welcome",{keyPrefix:"onboarding"}),{t:a}=(0,s.Bd)(),[l,{isSuccess:n,isLoading:o}]=(0,p.PX)(),{data:i,isSuccess:c}=(0,p.X)(),[d,m]=(0,t.useState)(location.origin);return(0,t.useEffect)((()=>{c&&i&&m(i)}),[c]),(0,t.useEffect)((()=>{n&&(e(),u.oR.success(a("tip.update")))}),[n]),(0,v.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-8 border-2 border-solid border-primary-300 dark:border-primary-700 bg-primary-25 dark:bg-primary-900 rounded-lg px-2 py-3 flex justify-start gap-4",children:[(0,v.jsx)(_.A,{}),(0,v.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,v.jsx)("span",{className:"text-sm text-primary-700 dark:text-primary-300 mb-1",children:r("update_domain_tip")}),(0,v.jsxs)("div",{className:"w-[300px] md:w-[400px] rounded flex gap-2",children:[(0,v.jsx)(b.A,{type:"url",className:"!shadow-none md:!bg-transparent",placeholder:"Frontend URL",value:d,onChange:e=>{m(e.target.value)}}),(0,v.jsx)(f.A,{disabled:!d||o,onClick:()=>{l(d)},className:"small ",children:a("action.update")})]})]})]})};function A(){const{t:e}=(0,s.Bd)("welcome",{keyPrefix:"onboarding"}),{t:r}=(0,s.Bd)(),{nextStep:a}=n(),{link:t,linkCopied:l,copyLink:o,generateNewLink:i}=(0,k.A)();return(0,v.jsxs)("div",{className:"px-2 h-full flex-center flex-col relative dark:text-gray-100",children:[(0,v.jsx)("span",{className:"text-2xl mb-2 font-bold",children:e("invite_title")}),(0,v.jsx)("span",{className:"text-sm mb-10 text-gray-400 dark:text-gray-600",children:e("last_tip")}),(0,v.jsx)("span",{className:"text-sm text-gray-500 mb-2 font-semibold",children:e("last_desc")}),(0,v.jsxs)("div",{className:"w-full md:w-[400px] rounded shadow-md flex border border-solid border-gray-100",children:[(0,v.jsx)(b.A,{className:"large !border-none !shadow-none",readOnly:!0,placeholder:"Generating",value:t}),(0,v.jsx)(f.A,{onClick:o,className:"ghost small border_less !px-2 md:hover:!text-primary-600",children:l?"Copied":r("action.copy")})]}),(0,v.jsx)(f.A,{className:"w-32 h-11 mt-6",onClick:a,children:e("done")}),(0,v.jsx)(C,{refreshInviteLink:i})]})}const S=({serverName:e,setServerName:r})=>{const{t:a}=(0,s.Bd)("welcome",{keyPrefix:"onboarding"}),{nextStep:t}=n();return(0,v.jsxs)("div",{className:"h-full flex-center flex-col text-center w-[360px] m-auto dark:text-gray-200",children:[(0,v.jsx)("span",{className:"text-2xl mb-2 font-bold",children:a("new_server")}),(0,v.jsx)("span",{className:"text-sm mb-6 text-gray-400 dark:text-gray-600",children:a("server_desc")}),(0,v.jsx)(b.A,{className:"h-11 px-3.5 py-2.5 border-gray-300 rounded-lg shadow",placeholder:a("placeholder_server"),value:e,onChange:e=>r(e.target.value)}),(0,v.jsx)(f.A,{className:"w-full mt-6",onClick:()=>{""!==e?t():u.Ay.error("Please enter server name!")},children:a("create_server")})]})};function E(){const{t:e}=(0,s.Bd)("welcome",{keyPrefix:"onboarding"}),{nextStep:r}=n();return(0,v.jsxs)("div",{className:"flex-center flex-col h-full text-center dark:text-gray-100",children:[(0,v.jsx)("span",{className:"text-2xl mb-2 font-bold",children:e("welcome")}),(0,v.jsx)("span",{className:"text-sm mb-6",children:e("welcome_desc")}),(0,v.jsxs)(f.A,{className:"!w-32 h-auto flex flex-col gap-2 items-center py-3 text-sm",onClick:r,children:[(0,v.jsx)("img",{src:j,alt:"play icon"}),(0,v.jsx)("span",{children:e("start")})]})]})}var L=a(5204);function P(){const{t:e}=(0,s.Bd)("welcome"),{t:r}=(0,s.Bd)("setting"),{nextStep:a}=n(),{data:l}=(0,p.T7)(),[o,{isSuccess:i,error:c}]=(0,p.n6)(),[d,m]=(0,t.useState)();return(0,t.useEffect)((()=>{l&&(l.who_can_sign_up,m(l.who_can_sign_up))}),[l]),(0,t.useEffect)((()=>{void 0!==c&&u.Ay.error(`Failed to update sign up rule: ${c.data}`)}),[c]),(0,t.useEffect)((()=>{i&&a()}),[i]),l?(0,v.jsxs)("div",{className:"h-full px-2 flex-center flex-col text-center w-full md:w-[512px] m-auto dark:text-gray-100",children:[(0,v.jsx)("span",{className:"font-bold text-2xl mb-2",children:e("onboarding.invite_title")}),(0,v.jsx)("span",{className:"text-sm mb-6",children:e("onboarding.invite_desc")}),d&&(0,v.jsx)(L.A,{options:[r("overview.sign_up.everyone"),r("overview.sign_up.invite")],values:["EveryOne","InvitationOnly"],value:d,onChange:m}),(0,v.jsx)(f.A,{className:"w-32 mt-6",disabled:!d,onClick:()=>{void 0!==l&&(l.who_can_sign_up!==d?o({...l,who_can_sign_up:d}):a())},children:e("onboarding.confirm")})]}):null}const B=()=>{var e;const{activeStep:r,goToStep:a}=n(),s=(null===(e=d[r])||void 0===e?void 0:e.canJumpTo)||[];return(0,v.jsx)("div",{className:"hidden md:flex absolute top-5 w-full justify-center gap-2 z-10",children:d.map(((e,l)=>{const n=s.includes(e.name),o=`${(0,i.A)("text-sm text-gray-600",n&&"cursor-pointer md:hover:text-gray-500",l===r&&"font-bold text-black",l>=r&&"text-gray-400")}`;return(0,v.jsxs)(t.Fragment,{children:[(0,v.jsx)("span",{className:o,onClick:()=>{n&&a(l)},children:e.label}),l!==d.length-1&&(0,v.jsx)("span",{className:o,children:"\u2192"})]},l)}))})};function R(){const{t:e}=(0,s.Bd)("welcome"),[r,a]=(0,t.useState)("");return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("title",{children:e("onboarding.title")||""}),(0,v.jsx)("div",{className:"h-screen bg-neutral-100 dark:bg-neutral-900 overflow-y-auto",children:(0,v.jsxs)(o,{header:(0,v.jsx)(B,{}),children:[(0,v.jsx)(E,{}),(0,v.jsx)(S,{serverName:r,setServerName:a}),(0,v.jsx)(w,{serverName:r}),(0,v.jsx)(P,{}),(0,v.jsx)(A,{}),(0,v.jsx)(N,{serverName:r})]})})]})}}}]);