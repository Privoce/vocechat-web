"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[549],{79063:(e,l,a)=>{a.d(l,{A:()=>i});var t,s=a(76697);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const r=({title:e,titleId:l,...a},r)=>s.createElement("svg",n({width:24,height:24,viewBox:"0 0 24 24",fill:"#70707B",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":l},a),e?s.createElement("title",{id:l},e):null,t||(t=s.createElement("path",{d:"M11.0004 17.5C11.0004 16.2111 11.3755 15.0098 12.0226 13.9993L4.25278 13.9999C3.01076 13.9999 2.00391 15.0068 2.00391 16.2488V17.1688C2.00391 17.7409 2.18231 18.2987 2.51427 18.7646C4.05643 20.9289 6.5794 22.0011 10.0004 22.0011C10.9317 22.0011 11.7966 21.9216 12.5921 21.7615C11.6006 20.6205 11.0004 19.1303 11.0004 17.5ZM15.0004 7.00464C15.0004 4.24321 12.7618 2.00464 10.0004 2.00464C7.23894 2.00464 5.00036 4.24321 5.00036 7.00464C5.00036 9.76606 7.23894 12.0046 10.0004 12.0046C12.7618 12.0046 15.0004 9.76606 15.0004 7.00464ZM23.0004 17.5C23.0004 14.4624 20.5379 12 17.5004 12C14.4628 12 12.0004 14.4624 12.0004 17.5C12.0004 20.5376 14.4628 23 17.5004 23C20.5379 23 23.0004 20.5376 23.0004 17.5ZM17.4105 14.008L17.5004 14L17.5902 14.008C17.7943 14.0451 17.9553 14.206 17.9923 14.4101L18.0004 14.5L17.9994 17H20.5043L20.5942 17.0081C20.7982 17.0451 20.9592 17.206 20.9962 17.4101L21.0043 17.5L20.9962 17.5899C20.9592 17.794 20.7982 17.9549 20.5942 17.9919L20.5043 18H17.9994L18.0004 20.5L17.9923 20.5899C17.9553 20.794 17.7943 20.9549 17.5902 20.9919L17.5004 21L17.4105 20.9919C17.2064 20.9549 17.0455 20.794 17.0084 20.5899L17.0004 20.5L16.9994 18H14.5043L14.4144 17.9919C14.2103 17.9549 14.0494 17.794 14.0123 17.5899L14.0043 17.5L14.0123 17.4101C14.0494 17.206 14.2103 17.0451 14.4144 17.0081L14.5043 17H16.9994L17.0004 14.5L17.0084 14.4101C17.0455 14.206 17.2064 14.0451 17.4105 14.008Z"}))),i=(0,s.forwardRef)(r)},27074:(e,l,a)=>{a.d(l,{A:()=>i});var t,s=a(76697);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const r=({title:e,titleId:l,...a},r)=>s.createElement("svg",n({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"#78787C",ref:r,"aria-labelledby":l},a),e?s.createElement("title",{id:l},e):null,t||(t=s.createElement("path",{d:"M12.75 4.125C12.75 3.50368 12.2463 3 11.625 3C11.0037 3 10.5 3.50368 10.5 4.125V10.5H4.125C3.50368 10.5 3 11.0037 3 11.625C3 12.2463 3.50368 12.75 4.125 12.75H10.5V19.125C10.5 19.7463 11.0037 20.25 11.625 20.25C12.2463 20.25 12.75 19.7463 12.75 19.125V12.75H19.125C19.7463 12.75 20.25 12.2463 20.25 11.625C20.25 11.0037 19.7463 10.5 19.125 10.5H12.75V4.125Z"}))),i=(0,s.forwardRef)(r)},4534:(e,l,a)=>{a.d(l,{A:()=>i});var t,s=a(76697);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const r=({title:e,titleId:l,...a},r)=>s.createElement("svg",n({width:20,height:20,viewBox:"0 0 20 20",stroke:"#344054",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":l},a),e?s.createElement("title",{id:l},e):null,t||(t=s.createElement("path",{d:"M5 7.5L10 12.5L15 7.5",strokeWidth:1.67,strokeLinecap:"round",strokeLinejoin:"round"}))),i=(0,s.forwardRef)(r)},56541:(e,l,a)=>{a.d(l,{A:()=>i});var t,s=a(76697);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const r=({title:e,titleId:l,...a},r)=>s.createElement("svg",n({width:16,height:16,viewBox:"0 0 16 16",stroke:"black",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":l},a),e?s.createElement("title",{id:l},e):null,t||(t=s.createElement("path",{d:"M10 4L6 8L10 12",strokeOpacity:.8,strokeLinecap:"round",strokeLinejoin:"round"}))),i=(0,s.forwardRef)(r)},77830:(e,l,a)=>{a.d(l,{A:()=>i});var t,s=a(76697);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const r=({title:e,titleId:l,...a},r)=>s.createElement("svg",n({width:20,height:20,viewBox:"0 0 20 20",fill:"#616161",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":l},a),e?s.createElement("title",{id:l},e):null,t||(t=s.createElement("path",{d:"M6.48667 11.6667L6.83667 8.33333H3.325V6.66667H7L7.43333 2.5H9.10833L8.66667 6.66667H11.9833L12.4167 2.5H14.0917L13.65 6.66667H16.625V8.33333H13.4667L13.1167 11.6667H16.6167V13.3333H12.9333L12.4917 17.5H10.8083L11.2417 13.3333H7.91667L7.475 17.5H5.8L6.23333 13.3333H3.25V11.6667H6.4H6.48667ZM8.1625 11.6667H11.4875L11.8375 8.33333H8.5125L8.1625 11.6667Z"}))),i=(0,s.forwardRef)(r)},93413:(e,l,a)=>{a.d(l,{A:()=>i});var t,s=a(76697);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const r=({title:e,titleId:l,...a},r)=>s.createElement("svg",n({width:16,height:16,viewBox:"0 0 16 16",fill:"#9CA3AF",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":l},a),e?s.createElement("title",{id:l},e):null,t||(t=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4 7.99961C14.4 9.69699 13.7257 11.3249 12.5255 12.5251C11.3252 13.7253 9.69736 14.3996 7.99998 14.3996C6.30259 14.3996 4.67472 13.7253 3.47449 12.5251C2.27426 11.3249 1.59998 9.69699 1.59998 7.99961C1.59998 6.30222 2.27426 4.67436 3.47449 3.47413C4.67472 2.27389 6.30259 1.59961 7.99998 1.59961C9.69736 1.59961 11.3252 2.27389 12.5255 3.47413C13.7257 4.67436 14.4 6.30222 14.4 7.99961ZM7.99998 5.59961C7.85941 5.59947 7.7213 5.63637 7.59953 5.70659C7.47777 5.77682 7.37666 5.87788 7.30638 5.99961C7.25563 6.09391 7.18646 6.17706 7.10298 6.24414C7.0195 6.31121 6.92341 6.36084 6.82039 6.39009C6.71737 6.41934 6.60953 6.4276 6.50326 6.4144C6.39699 6.40119 6.29445 6.36679 6.20172 6.31322C6.109 6.25965 6.02797 6.18801 5.96344 6.10254C5.89891 6.01708 5.8522 5.91953 5.82608 5.81568C5.79995 5.71182 5.79494 5.60378 5.81135 5.49796C5.82775 5.39213 5.86523 5.29068 5.92158 5.19961C6.18575 4.7421 6.5935 4.38454 7.0816 4.18238C7.56969 3.98022 8.11085 3.94476 8.62115 4.0815C9.13145 4.21823 9.58237 4.51952 9.90399 4.93865C10.2256 5.35777 10.4 5.87131 10.4 6.39961C10.4001 6.8961 10.2463 7.38043 9.95978 7.78589C9.67324 8.19135 9.26803 8.498 8.79998 8.66361V8.79961C8.79998 9.01178 8.71569 9.21527 8.56566 9.36529C8.41563 9.51532 8.21215 9.59961 7.99998 9.59961C7.7878 9.59961 7.58432 9.51532 7.43429 9.36529C7.28426 9.21527 7.19998 9.01178 7.19998 8.79961V7.99961C7.19998 7.78744 7.28426 7.58395 7.43429 7.43392C7.58432 7.28389 7.7878 7.19961 7.99998 7.19961C8.21215 7.19961 8.41563 7.11532 8.56566 6.96529C8.71569 6.81527 8.79998 6.61178 8.79998 6.39961C8.79998 6.18744 8.71569 5.98395 8.56566 5.83392C8.41563 5.68389 8.21215 5.59961 7.99998 5.59961ZM7.99998 11.9996C8.21215 11.9996 8.41563 11.9153 8.56566 11.7653C8.71569 11.6153 8.79998 11.4118 8.79998 11.1996C8.79998 10.9874 8.71569 10.784 8.56566 10.6339C8.41563 10.4839 8.21215 10.3996 7.99998 10.3996C7.7878 10.3996 7.58432 10.4839 7.43429 10.6339C7.28426 10.784 7.19998 10.9874 7.19998 11.1996C7.19998 11.4118 7.28426 11.6153 7.43429 11.7653C7.58432 11.9153 7.7878 11.9996 7.99998 11.9996Z"}))),i=(0,s.forwardRef)(r)},21049:(e,l,a)=>{a.d(l,{A:()=>i});var t,s=a(76697);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},n.apply(null,arguments)}const r=({title:e,titleId:l,...a},r)=>s.createElement("svg",n({width:24,height:24,viewBox:"0 0 24 24",fill:"#70707B",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":l},a),e?s.createElement("title",{id:l},e):null,t||(t=s.createElement("path",{d:"M10 2.5C14.1421 2.5 17.5 5.85786 17.5 10C17.5 11.7101 16.9276 13.2866 15.964 14.5483L20.7071 19.2929C21.0976 19.6834 21.0976 20.3166 20.7071 20.7071C20.3466 21.0676 19.7794 21.0953 19.3871 20.7903L19.2929 20.7071L14.5483 15.964C13.2866 16.9276 11.7101 17.5 10 17.5C5.85786 17.5 2.5 14.1421 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5ZM10 4.5C6.96243 4.5 4.5 6.96243 4.5 10C4.5 13.0376 6.96243 15.5 10 15.5C13.0376 15.5 15.5 13.0376 15.5 10C15.5 6.96243 13.0376 4.5 10 4.5Z"}))),i=(0,s.forwardRef)(r)},16424:(e,l,a)=>{a.d(l,{A:()=>j});var t,s=a(76697),n=a(39265),r=a(68883),i=a(50595),c=a(79063);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},d.apply(null,arguments)}const o=({title:e,titleId:l,...a},n)=>s.createElement("svg",d({width:20,height:20,viewBox:"0 0 20 20",fill:"#616161",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":l},a),e?s.createElement("title",{id:l},e):null,t||(t=s.createElement("path",{d:"M10 1.75C14.5563 1.75 18.25 5.44365 18.25 10C18.25 12.8269 17.0262 14.75 15 14.75C13.7958 14.75 12.8751 14.0708 12.3262 12.9264C11.6738 13.7512 10.7016 14.25 9.5 14.25C7.20741 14.25 5.75 12.4342 5.75 10C5.75 7.53639 7.16021 5.75 9.5 5.75C10.3964 5.75 11.1564 6.01222 11.753 6.47429C11.7643 6.07167 12.0946 5.75 12.5 5.75C12.8797 5.75 13.1935 6.03215 13.2432 6.39823L13.25 6.5V10C13.25 12.1017 13.9808 13.25 15 13.25C16.0192 13.25 16.75 12.1017 16.75 10C16.75 6.27208 13.7279 3.25 10 3.25C6.27208 3.25 3.25 6.27208 3.25 10C3.25 13.7279 6.27208 16.75 10 16.75C10.794 16.75 11.5682 16.6132 12.2981 16.3489C12.6876 16.2079 13.1176 16.4093 13.2587 16.7988C13.3997 17.1883 13.1982 17.6183 12.8088 17.7593C11.9157 18.0827 10.9688 18.25 10 18.25C5.44365 18.25 1.75 14.5563 1.75 10C1.75 5.44365 5.44365 1.75 10 1.75ZM9.5 7.25C8.07681 7.25 7.25 8.29737 7.25 10C7.25 11.6694 8.11734 12.75 9.5 12.75C10.8827 12.75 11.75 11.6694 11.75 10C11.75 8.29737 10.9232 7.25 9.5 7.25Z"}))),m=(0,s.forwardRef)(o);var u=a(21049),x=a(71207),h=a(71536),p=a(38706),b=a(13676),v=a(93238),g=a(36506),f=a(44109);function j(){const{t:e}=(0,n.Bd)(),l=(0,i.GV)((e=>{var l;return null===(l=e.authData.user)||void 0===l?void 0:l.is_admin}),g.bN),a=(0,i.GV)((e=>e.server.only_admin_can_create_group),g.bN),[t,d]=(0,s.useState)(!1),[o,j]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[k,_]=(0,s.useState)(!1),A=()=>{j((e=>(e||(0,r.cJ)(),!e)))},L=()=>{C((e=>(e||(0,r.cJ)(),!e)))},H=()=>{_((e=>(e||(0,r.cJ)(),!e)))},E=e=>{d(e),N(!0),(0,r.cJ)()},V="rounded flex items-center gap-2 text-sm font-semibold cursor-pointer px-2 py-2.5 md:hover:bg-gray-800/20 md:dark:hover:bg-gray-200/20",M="w-5 h-5 dark:fill-gray-300",O=!a||l;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("ul",{className:"flex flex-col rounded-xl drop-shadow p-1 select-none text-gray-500 dark:text-gray-300 bg-white dark:bg-black",children:[l&&(0,f.jsxs)("li",{className:V,onClick:E.bind(null,!1),children:[(0,f.jsx)(x.A,{className:M}),e("action.new_channel")]}),O&&(0,f.jsxs)("li",{className:V,onClick:E.bind(null,!0),children:[(0,f.jsx)(x.A,{personal:!0,className:M}),e("action.new_private_channel")]}),(0,f.jsxs)("li",{className:V,onClick:H,children:[(0,f.jsx)(m,{className:M}),e("action.new_msg")]}),(0,f.jsxs)("li",{className:V,onClick:A,children:[(0,f.jsx)(c.A,{className:M}),e("action.invite_people")]}),(0,f.jsxs)("li",{className:V,onClick:L,children:[(0,f.jsx)(u.A,{className:M}),e("action.search_people")]})]}),y&&(0,f.jsx)(h.A,{personal:t,closeModal:()=>{N(!1)}}),k&&(0,f.jsx)(v.A,{closeModal:H}),o&&(0,f.jsx)(p.A,{closeModal:A}),w&&(0,f.jsx)(b.A,{closeModal:L})]})}},71207:(e,l,a)=>{a.d(l,{A:()=>m});var t,s,n=a(76697);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},r.apply(null,arguments)}const i=({title:e,titleId:l,...a},i)=>n.createElement("svg",r({width:20,height:20,viewBox:"0 0 20 20",fill:"#616161",xmlns:"http://www.w3.org/2000/svg",ref:i,"aria-labelledby":l},a),e?n.createElement("title",{id:l},e):null,t||(t=n.createElement("path",{d:"M6.83667 8.33333L6.48667 11.6667H6.4H3.25V13.3333H6.23333L5.8 17.5H7.475L7.91667 13.3333H11.2417L10.8083 17.5H12.4917L12.9333 13.3333H16.6167V11.6667H13.1167L13.2917 10H11.6625L11.4875 11.6667H8.1625L8.5125 8.33333H10.8334V6.66667H8.66667L9.10833 2.5H7.43333L7 6.66667H3.325V8.33333H6.83667Z"})),s||(s=n.createElement("path",{d:"M16.6875 4.16675V3.33341C16.6875 2.40008 15.875 1.66675 15 1.66675C14.125 1.66675 13.3333 2.40008 13.3333 3.33341V4.16675C12.8731 4.16675 12.5 4.53985 12.5 5.00008V7.50008C12.5 7.96031 12.8731 8.33341 13.3333 8.33341H15H16.6667C17.1269 8.33341 17.5 7.96031 17.5 7.50008V4.97925C17.5 4.53051 17.1362 4.16675 16.6875 4.16675ZM15.8333 4.16675H14.1667V3.33341C14.1667 2.85722 14.5556 2.50008 15 2.50008C15.4444 2.50008 15.8333 2.85722 15.8333 3.33341V4.16675Z"}))),c=(0,n.forwardRef)(i);var d=a(77830),o=a(44109);const m=({personal:e=!1,muted:l=!1,className:a=""})=>(0,o.jsx)("div",{className:`flex ${l?"!text-gray-400":""} ${a}`,children:e?(0,o.jsx)(c,{className:"dark:fill-gray-300"}):(0,o.jsx)(d.A,{className:"dark:fill-gray-300"})})},71536:(e,l,a)=>{a.d(l,{A:()=>j});var t=a(76697),s=a(49522),n=a(39265),r=a(24892),i=a(67600),c=a(49555),d=a(27020),o=a(50595),m=a(92577),u=a(71207),x=a(20198),h=a(29833),p=a(77090),b=a(48633),v=a(73914),g=a(36506),f=a(44109);const j=({personal:e=!1,closeModal:l})=>{const{t:a}=(0,n.Bd)("chat"),j=(0,r.Zp)(),[w]=(0,d.n1)(),C=(0,o.GV)((e=>e.channels.byId),g.bN),y=(0,o.GV)((e=>e.authData.user),g.bN),[N,k]=(0,t.useState)({name:"",description:"",members:null!==y&&void 0!==y&&y.uid?[y.uid]:[],is_public:!e}),{users:_,input:A,updateInput:L}=(0,m.A)(),[H,{isSuccess:E,isError:V,isLoading:M,data:O}]=(0,d.ug)();(0,t.useEffect)((()=>{V&&s.Ay.error("create new channel failed")}),[V]),(0,t.useEffect)((()=>{const e="object"==typeof O?O.gid:O;if(E&&e&&C[e]){var a;const t=C[e].name,n=null!==(a=i.Ay.t("welcome_msg",{ns:"chat",name:t}))&&void 0!==a?a:"";w({id:e,content:n,from_uid:null===y||void 0===y?void 0:y.uid,type:"text"}),l(),s.Ay.success("create new channel success"),j(`/chat/channel/${e}`)}}),[E,O,C]);const S=({currentTarget:e})=>{var l;const a=null!==(l=N.members)&&void 0!==l?l:[],{uid:t}=e.dataset,s=Number(t),n=a.includes(s)?a.filter((e=>e!=s)):[...a,s];k((e=>({...e,members:n})))};if(!y)return null;const{name:B,members:I,is_public:Z}=N,R=y.uid;return(0,f.jsx)(x.A,{children:(0,f.jsxs)("div",{className:"flex flex-col md:flex-row max-h-screen md:max-h-[402px] bg-white dark:bg-gray-800 drop-shadow rounded-lg",children:[!Z&&(0,f.jsxs)("div",{className:"md:w-[260px] md:shadow-[inset_-1px_0px_0px_rgba(0,_0,_0,_0.1)]",children:[(0,f.jsx)("div",{className:"sticky top-0 z-[99] rounded-tl-lg shadow-[0px_1px_0px_rgba(0,_0,_0,_0.1)] p-2 w-[calc(100%_-_1px)]",children:(0,f.jsx)("input",{className:"outline-none p-2 text-sm w-full bg-transparent dark:text-white",value:A,onChange:e=>{L(e.target.value)},placeholder:a("search_user_placeholder")})}),_&&(0,f.jsx)("ul",{className:"flex flex-col overflow-y-scroll overflow-x-hidden max-h-80 md:h-[calc(100%_-_52px_-_10px)]",children:_.map((e=>{const{uid:l}=e,a=!!I&&I.includes(l);return(0,f.jsxs)("li",{"data-uid":l,className:"cursor-pointer flex items-center px-4 rounded md:hover:bg-gray-500/10",onClick:R==l?void 0:S,children:[(0,f.jsx)(p.A,{disabled:R==l,readOnly:!0,checked:a,name:"cb",id:"cb"}),(0,f.jsx)(v.A,{uid:l,interactive:!1})]},l)}))})]}),(0,f.jsxs)("div",{className:(0,c.A)("w-80 md:min-w-[400px] flex flex-col items-center p-8 box-border",!Z&&"w-[344px] justify-evenly"),children:[(0,f.jsx)("h3",{className:"font-semibold text-xl text-gray-600 mb-4 dark:text-white",children:a("create_channel")}),(0,f.jsx)("p",{className:"text-gray-400 mb-2 md:mb-12 text-sm font-normal",children:a(Z?"create_channel_desc":"create_private_channel_desc")}),(0,f.jsxs)("div",{className:"w-full flex flex-col justify-start gap-2 mb-2 md:mb-8",children:[(0,f.jsx)("span",{className:"text-gray-400 text-sm font-normal",children:a("channel_name")}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("input",{className:"text-gray-600 dark:text-gray-300 rounded p-2 pl-9 border border-solid border-gray-300 w-full bg-transparent",onChange:e=>{k((l=>({...l,name:e.target.value})))},value:B,placeholder:"new channel"}),(0,f.jsx)(u.A,{personal:!Z,className:"absolute left-2 top-1/2 -translate-y-1/2"})]})]}),(0,f.jsxs)("div",{className:"w-full flex items-center justify-between mb-8 md:mb-12",children:[(0,f.jsx)("span",{className:"text-gray-400 text-sm",children:a("private_channel")}),(0,f.jsx)(b.A,{checked:!Z,disabled:!(null!==y&&void 0!==y&&y.is_admin),onClick:()=>{const{is_public:e}=N;k((l=>({...l,is_public:!e})))}})]}),(0,f.jsxs)("div",{className:"w-full flex gap-4 items-center justify-end",children:[(0,f.jsx)(h.A,{onClick:l,className:"text-sm cancel",children:a("action.cancel",{ns:"common"})}),(0,f.jsx)(h.A,{disabled:M,onClick:()=>{N.name?(N.is_public&&delete N.members,H(N)):(0,s.Ay)("please input channel name")},className:"text-sm",children:a("action.create",{ns:"common"})})]})]})]})})}},66255:(e,l,a)=>{a.d(l,{A:()=>r});a(76697);var t=a(24892),s=a(56541),n=a(44109);const r=({path:e,className:l=""})=>{const a=(0,t.Zp)(),r=(0,t.RQ)("/chat/channel/:channel_id"),i=(0,t.RQ)("/chat/dm/:user_id"),c=(0,t.RQ)("/users/:user_id"),d=!!r||!!i;return(0,n.jsx)("button",{className:`p-1 absolute left-0 md:hidden ${l}`,onClick:()=>{a(e||(d?"/chat":c?"/users":-1))},children:(0,n.jsx)(s.A,{className:"dark:stroke-white  w-6 h-6"})})}},13722:(e,l,a)=>{a.d(l,{A:()=>v});var t=a(76697),s=a(39265),n=a(53754),r=a(49371),i=a(93413),c=a(20198),d=a(50875),o=a(29833),m=a(77197),u=a(64166),x=a(19081),h=a(44109);const p=(0,n.hU)(),b=(0,n.mM)(),v=({context:e="members",cid:l})=>{const[a,n]=(0,t.useState)({expire:p[4],times:b[0]}),[v,g]=(0,t.useState)(a.expire),[f,j]=(0,t.useState)(a.times),[w,C]=(0,t.useState)(!1),{t:y}=(0,s.Bd)("chat"),{generating:N,link:k,linkCopied:_,copyLink:A,generateNewLink:L}=(0,r.A)(l),H=e=>{const{expire:l,times:t}=null!==e&&void 0!==e?e:a;L({expire:l.value,times:t.value})},E=()=>{C((e=>!e))};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"flex flex-col items-start pb-8",children:["members"==e&&(0,h.jsxs)("p",{className:"font-semibold text-sm mb-2 text-gray-500 dark:text-gray-50 flex flex-col md:flex-row gap-4",children:[y("share_invite_link"),(0,h.jsxs)("a",{className:"text-primary-500 flex gap-1 items-center",href:"http://doc.voce.chat/faq#fe_url",target:"_blank",rel:"noopener noreferrer",children:[(0,h.jsx)(i.A,{})," ",y("invite_link_faq")]})]}),(0,h.jsxs)("div",{className:"w-full md:w-[512px] mb-3 relative",children:[(0,h.jsx)(m.A,{readOnly:!0,className:"large !pr-16",placeholder:"Generating",value:k}),(0,h.jsx)(o.A,{onClick:A,className:"ghost small border_less absolute right-1 top-1/2 -translate-y-1/2",children:_?"Copied":y("action.copy",{ns:"common"})})]}),(0,h.jsxs)("span",{className:"text-xs text-gray-600 dark:text-gray-100 flex gap-2",children:[y("invite_link_setting_tip",{expire:a.expire.label,times:a.times.label}),(0,h.jsx)("button",{className:"text-primary-500 flex gap-1 items-center",onClick:E,children:y("invite_link_edit")})]}),(0,h.jsx)("div",{className:"w-44 h-44 my-2",children:(0,h.jsx)(d.A,{size:1200,link:k})}),(0,h.jsx)(o.A,{className:"ghost",disabled:N,onClick:H.bind(null,void 0),children:N?"Generating":y("generate_new_link")})]}),w&&(0,h.jsx)(c.A,{id:"modal-modal",children:(0,h.jsx)(u.A,{compact:!0,title:"Update Invite Link Settings",buttons:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.A,{onClick:E,className:"cancel small",children:y("action.cancel",{ns:"common"})}),(0,h.jsx)(o.A,{className:"main small",onClick:()=>{n({expire:v,times:f}),E(),H({expire:v,times:f})},children:"Update"})]}),children:(0,h.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,h.jsxs)("div",{className:"flex flex-col gap-2 items-start",children:[(0,h.jsx)("span",{className:"text-sm dark:text-gray-100",children:"Expire After:"}),(0,h.jsx)(x.A,{options:p.map((e=>{const{label:l,value:a}=e;return{title:l,value:`${a}`,selected:v.value===a}})),current:{title:v.label},updateSelect:e=>{g(p.find((l=>l.value===Number(e.value))))}})]}),(0,h.jsxs)("div",{className:"flex flex-col gap-2 items-start",children:[(0,h.jsx)("span",{className:"text-sm dark:text-gray-100",children:"Max Times of Uses:"}),(0,h.jsx)(x.A,{options:b.map((e=>{const{label:l,value:a}=e;return{title:l,value:`${a}`,selected:f.value===a}})),current:{title:f.label},updateSelect:e=>{j(b.find((l=>l.value===Number(e.value))))}})]})]})})})]})}},38706:(e,l,a)=>{a.d(l,{A:()=>C});var t=a(39265),s=a(50595),n=a(77299),r=a(20198),i=a(76697),c=a(49522),d=a(27020),o=a(92577),m=a(29833),u=a(77090),x=a(77197),h=a(73914),p=a(36506),b=a(44109);const v=({cid:e=0,closeModal:l})=>{const[a,{isLoading:t,isSuccess:r}]=(0,d.DD)(),[v,g]=(0,i.useState)([]),f=(0,s.GV)((l=>l.channels.byId[e]),p.bN),j=(0,s.GV)((e=>e.users.byId),p.bN);(0,i.useEffect)((()=>{r&&(c.Ay.success("Add members successfully!"),l())}),[r]);const{input:w,updateInput:C,users:y=[]}=(0,o.A)(),N=({currentTarget:e})=>{const l=Number(e.dataset.uid);v.includes(l)?g((e=>e.filter((e=>e!=l)))):g([...v,+l])};if(!f)return null;const{members:k}=f,_=y.map((e=>(null===e||void 0===e?void 0:e.uid)||0));return(0,b.jsxs)("div",{className:"pt-4",children:[(0,b.jsx)("div",{className:"flex items-center max-w-[520px] min-h-[40px] px-2 py-1.5 mb-3 border border-solid border-slate-100 shadow rounded",children:(0,b.jsxs)("ul",{className:"flex items-center flex-wrap gap-1 w-full overflow-scroll",children:[v.map((e=>{var l;return(0,b.jsxs)("li",{className:"px-1.5 py-1 rounded text-sm bg-primary-300 text-white flex items-center justify-between gap-1",children:[null===(l=j[e])||void 0===l?void 0:l.name,(0,b.jsx)(n.A,{"data-uid":e,onClick:N,className:"cursor-pointer w-3 h-3 fill-white"})]},e)})),(0,b.jsx)(x.A,{autoFocus:!0,type:"text",className:"!w-fit none",value:w,onChange:e=>{C(e.target.value)}})]})}),(0,b.jsx)("ul",{className:"flex flex-col pb-5 max-h-[364px] overflow-scroll",children:_.map((e=>{const l=k.includes(e);return(0,b.jsxs)("li",{"data-uid":e,className:"cursor-pointer flex items-center px-2 py-1 rounded-lg md:hover:bg-slate-400/20",onClick:l?void 0:N,children:[(0,b.jsx)(u.A,{disabled:l,readOnly:!0,checked:l||v.includes(e),name:"cb",id:"cb"}),(0,b.jsx)(h.A,{uid:e,interactive:!1})]},e)}))}),(0,b.jsxs)(m.A,{disabled:0==v.length||t,className:"flex mt-4 justify-center items-center",onClick:()=>{a({id:e,members:v})},children:[t?"Adding":"Add"," to #",f.name]})]})};var g=a(99593),f=a(49371),j=a(13722);const w=({cid:e})=>{const{t:l}=(0,t.Bd)("chat"),{t:a}=(0,t.Bd)(),[s,n]=(0,i.useState)(""),r=(0,i.useRef)(null),[d,{isSuccess:o,isLoading:u}]=(0,g.DH)(),{enableSMTP:h}=(0,f.A)(e);(0,i.useEffect)((()=>{o&&c.Ay.success("Email Sent!")}),[o]);return(0,b.jsxs)("div",{className:"pt-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,b.jsx)("label",{className:"text-sm text-gray-400 dark:text-gray-100",htmlFor:"",children:l("invite_by_email")}),(0,b.jsxs)("div",{className:"relative flex items-center gap-2",children:[(0,b.jsx)("form",{ref:r,action:"/",className:"w-full",children:(0,b.jsx)(x.A,{className:"!pr-20",required:!0,value:s,onChange:e=>{n(e.target.value)},disabled:!h,type:"email",name:"email",placeholder:h?"Enter Email":l("enable_smtp")})}),(0,b.jsx)(m.A,{disabled:!h||!s||u,className:"send",onClick:()=>{if(r&&r.current){const e=r.current;e.checkValidity()?d(s):e.reportValidity()}},children:a("action.send")})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 mb-3",children:[(0,b.jsx)("label",{className:"text-sm text-gray-400 dark:text-gray-100",htmlFor:"",children:l("send_invite_link")}),(0,b.jsx)(j.A,{context:"channel",cid:e})]})]})},C=({type:e="server",cid:l,title:a="",closeModal:i})=>{const{t:c}=(0,t.Bd)("chat"),d=(0,s.GV)((e=>l?e.channels.byId[l]:void 0),p.bN),o=(0,s.GV)((e=>e.server.name),p.bN),m="server"==e?o:`#${a||(null===d||void 0===d?void 0:d.name)}`;return(0,b.jsx)(r.A,{children:(0,b.jsxs)("div",{className:"flex flex-col bg-white dark:bg-gray-900 rounded-lg max-h-[85vh] overflow-y-scroll  md:min-w-[408px] relative",children:[(0,b.jsxs)("h2",{className:"z-50 p-4 bg-white dark:bg-gray-900 flex items-center justify-between text-lg text-gray-700 dark:text-gray-50 sticky top-0",children:[c("invite_title",{name:m}),(0,b.jsx)(n.A,{className:"cursor-pointer dark:fill-white",onClick:i})]}),(0,b.jsxs)("div",{className:"px-4 pb-4",children:[!(null!==d&&void 0!==d&&d.is_public)&&(0,b.jsx)(v,{cid:l,closeModal:i}),(0,b.jsx)(w,{cid:null!==d&&void 0!==d&&d.is_public?void 0:l})]})]})})}},50875:(e,l,a)=>{a.d(l,{A:()=>i});var t=a(30489),s=a(50595),n=a(36506),r=a(44109);const i=({link:e,size:l=512,level:a="L"})=>{const i=(0,s.GV)((e=>e.server.logo),n.bN);return(0,r.jsx)("div",{className:"p-2 bg-white dark:bg-slate-200 rounded",children:(0,r.jsx)(t.h,{value:e,className:"rounded border border-solid border-gray-200 dark:border-none !w-full !h-full",size:l,bgColor:"#fff",fgColor:"#000",level:a,marginSize:2,imageSettings:{src:i,x:void 0,y:void 0,height:l/6,width:l/6,excavate:!0}})})}},13676:(e,l,a)=>{a.d(l,{A:()=>g});var t=a(76697),s=a(39265),n=a(24892),r=a(49555),i=a(53754),c=a(82604),d=a(50595),o=a(77299),m=a(21049),u=a(52718),x=a(20198),h=a(29833),p=a(77197),b=a(36506),v=a(44109);const g=({closeModal:e})=>{const[l,{isLoading:a}]=(0,c.QI)(),g=(0,d.GV)((e=>e.users.byId),b.bN),{t:f}=(0,s.Bd)(),j=(0,n.Zp)(),w=(0,t.useRef)(null),[C,y]=(0,t.useState)("name"),[N,k]=(0,t.useState)({id:"",email:"",name:""}),[_,{data:A,isSuccess:L,isLoading:H,reset:E}]=(0,c.yG)(),V=e=>{y(e)},M=Boolean(A&&g[A.uid]&&"added"==g[A.uid].status),O="id"==C?"number":"email"==C?"email":"text";return(0,v.jsx)(x.A,{children:(0,v.jsxs)("div",{className:" relative flex flex-col gap-2 w-96 px-4 py-3 rounded-lg bg-gray-100 dark:bg-gray-900 text-slate-900 dark:text-slate-100",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,v.jsx)(h.A,{className:(0,r.A)("mini","name"!==C&&"ghost !border-none !shadow-none"),onClick:V.bind(null,"name"),children:f("search_by_name",{ns:"member"})}),(0,v.jsx)(h.A,{className:(0,r.A)("mini","email"!==C&&"ghost !border-none !shadow-none"),onClick:V.bind(null,"email"),children:f("search_by_email",{ns:"member"})}),(0,v.jsx)(h.A,{className:(0,r.A)("mini","id"!==C&&"ghost !border-none !shadow-none"),onClick:V.bind(null,"id"),children:f("search_by_id",{ns:"member"})})]}),(0,v.jsx)("form",{className:"w-full",ref:w,action:"/",onSubmit:e=>{if(e.preventDefault(),!w.current)return;const l=w.current;if(!l.checkValidity())return void l.reportValidity();const a=N[C];_({search_type:C,keyword:a})},children:(0,v.jsx)(p.A,{required:!0,type:O,className:"none",disabled:H,prefix:(0,v.jsx)(m.A,{className:"dark:fill-gray-400 w-6 h-6 shrink-0"}),value:N[C],placeholder:`${f("email"==C?"search_by_email_ph":"id"==C?"search_by_id_ph":"search_by_name_ph",{ns:"member"})}...`,onChange:e=>{const l={[C]:e.target.value};k((e=>({...e,...l})))}})}),(0,v.jsx)("div",{className:"min-h-[280px] flex-center pb-10",children:L?A?(0,v.jsxs)("div",{className:"flex flex-col items-center pt-10",children:[(0,v.jsx)(u.A,{className:"rounded-full",src:0===A.avatar_updated_at?"":`${i.Ay}/resource/avatar?uid=${A.uid}&t=${A.avatar_updated_at}`,name:A.name,width:120,height:120}),(0,v.jsx)("span",{className:"my-2 dark:text-gray-100 text-gray-950",children:A.name}),(0,v.jsxs)("div",{className:"flex gap-2 my-2",children:[(0,v.jsx)(h.A,{className:"mini ghost",onClick:()=>{A&&j(`/chat/dm/${A.uid}`)},children:f("send_msg",{ns:"member"})}),!M&&(0,v.jsx)(h.A,{disabled:a,onClick:(async a=>{A&&(a||await l({target_uid:A.uid,action:"add"}),e(),j(`/chat/dm/${A.uid}`))}).bind(null,M),className:(0,r.A)("mini",M&&"ghost"),children:"Add to contact"})]})]}):(0,v.jsxs)("div",{className:"w-full h-full text-center flex flex-col gap-3 items-center",children:[(0,v.jsx)("span",{className:"text-sm text-gray-800 dark:text-gray-200",children:f("search_not_found",{ns:"member"})}),(0,v.jsx)(h.A,{className:"mini",onClick:()=>{E(),k((e=>({...e,[C]:""})))},children:"Ok"})]}):null}),(0,v.jsx)(o.A,{role:"button",className:"absolute top-2 right-2 dark:fill-white w-5 h-5",onClick:e})]})})}},93238:(e,l,a)=>{a.d(l,{A:()=>m});var t=a(76697),s=a(39265),n=a(50276),r=a(57214),i=a(92577),c=a(20198),d=a(73914),o=a(44109);const m=({closeModal:e})=>{const{t:l}=(0,s.Bd)("chat"),a=(0,t.useRef)(null),{users:m,updateInput:u,input:x}=(0,i.A)();(0,r.j)(a,e);return(0,o.jsx)(c.A,{children:(0,o.jsxs)("div",{className:"flex flex-col w-80 md:w-[440px] max-h-[402px] bg-white dark:bg-gray-900 drop-shadow rounded-lg",ref:a,children:[(0,o.jsx)("div",{className:"shadow-md p-2",children:(0,o.jsx)("input",{className:"p-2 text-sm bg-transparent dark:text-white w-full outline-none",value:x,onChange:e=>{u(e.target.value)},placeholder:l("search_user_placeholder")})}),m&&(0,o.jsx)("ul",{className:"flex flex-col overflow-y-scroll h-[260px] py-4",children:m.map((l=>{const{uid:a=0}=l||{};return(0,o.jsx)("li",{className:"cursor-pointer px-2 md:hover:bg-gray-600/10",children:(0,o.jsx)(n.k2,{className:"w-full",onClick:e,to:`/chat/dm/${a}`,children:(0,o.jsx)(d.A,{uid:a,interactive:!1})})},a)}))})]})})}},19081:(e,l,a)=>{a.d(l,{A:()=>d});var t=a(76697),s=a(39265),n=a(6133),r=a(4534),i=a(51136),c=a(44109);const d=({options:e=[],updateSelect:l=null,current:a=null})=>{var d;const{t:o}=(0,s.Bd)(),[m,u]=(0,t.useState)(!1),[x,h]=(0,t.useState)(null),p=()=>{u((e=>!e))},b=e=>{h(e),p(),l&&l(e)};return(0,c.jsx)(n.Ay,{onClickOutside:u.bind(null,!1),visible:m,appendTo:document.body,placement:"bottom",interactive:!0,content:(0,c.jsx)("ul",{className:"context-menu",children:e.map((({title:e,value:l,selected:a,underline:t})=>(0,c.jsxs)("li",{onClick:a?void 0:b.bind(null,{title:e,value:l}),className:"item sb "+(t?"bottom_line":""),"data-disabled":a,children:[e,a&&(0,c.jsx)(i.A,{className:"icon"})]},l)))}),children:(0,c.jsxs)("div",{className:"cursor-pointer select-none border border-slate-200 dark:border-slate-800 p-2 flex items-center gap-2",onClick:p,children:[(0,c.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-200 min-w-[120px]",children:(null===(d=null!==a?a:x)||void 0===d?void 0:d.title)||o("action.select")}),(0,c.jsx)(r.A,{className:"!w-5 !h-5"})]})})}},48633:(e,l,a)=>{a.d(l,{A:()=>n});var t=a(49555),s=a(44109);const n=e=>{const{checked:l=!0,disabled:a=!1}=e;return(0,s.jsx)("div",{...e,className:(0,t.A)("cursor-pointer relative w-11 h-6  rounded-xl",l?"bg-primary-400":"bg-gray-300",a&&"cursor-not-allowed bg-gray-400 pointer-events-none"),children:(0,s.jsx)("div",{className:(0,t.A)("rounded-full bg-white w-5 h-5 absolute top-0.5 right-0.5 transition-all",!l&&"-translate-x-full")})})}},49371:(e,l,a)=>{a.d(l,{A:()=>x});var t=a(76697),s=a(53754),n=a(27020),r=a(64220),i=a(50595),c=a(49844),d=a(36506);const o=(0,s.hU)()[4].value,m=(0,s.mM)()[0].value,u={expire:o,times:m};function x(e){const[l,a]=(0,t.useState)(""),s=(0,i.GV)((l=>l.channels.byId[null!==e&&void 0!==e?e:0]),d.bN),{data:x,isSuccess:h}=(0,r.Q0)(),[p,{data:b,isLoading:v}]=(0,n.L3)(),[g,{data:f,isLoading:j}]=(0,n.Wy)(),{copied:w,copy:C}=(0,c.A)({enableToast:!1});(0,t.useEffect)((()=>{!e||null!==s&&void 0!==s&&s.is_public?p({expire:o,times:m}):g({cid:e,expire:o,times:m})}),[e,s]),(0,t.useEffect)((()=>{const e=b||f;e&&h&&a(e)}),[b,f,h]);return{enableSMTP:x,generating:j||v,generateNewLink:(l=u)=>{const{expire:a,times:t}=l;!e||null!==s&&void 0!==s&&s.is_public?p({expire:a,times:t}):g({cid:e,expire:a,times:t})},link:l,linkCopied:w,copyLink:()=>{C(l)}}}}}]);